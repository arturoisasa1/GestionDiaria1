/* Built on 2018-08-27 18:16:10 */
!function(t){"use strict";function e(){w(!0)}var i={};t.respond=i,i.update=function(){};var n=[],s=function(){var e=!1;try{e=new t.XMLHttpRequest}catch(i){e=new t.ActiveXObject("Microsoft.XMLHTTP")}return function(){return e}}(),o=function(t,e){var i=s();i&&(i.open("GET",t,!0),i.onreadystatechange=function(){4!==i.readyState||200!==i.status&&304!==i.status||e(i.responseText)},4!==i.readyState&&i.send(null))},a=function(t){return t.replace(i.regex.minmaxwh,"").match(i.regex.other)};if(i.ajax=o,i.queue=n,i.unsupportedmq=a,i.regex={media:/@media[^\{]+\{([^\{\}]*\{[^\}\{]*\})+/gi,keyframes:/@(?:\-(?:o|moz|webkit)\-)?keyframes[^\{]+\{(?:[^\{\}]*\{[^\}\{]*\})+[^\}]*\}/gi,comments:/\/\*[^*]*\*+([^\/][^*]*\*+)*\//gi,urls:/(url\()['"]?([^\/\)'"][^:\)'"]+)['"]?(\))/g,findStyles:/@media *([^\{]+)\{([\S\s]+?)$/,only:/(only\s+)?([a-zA-Z]+)\s?/,minw:/\(\s*min\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,maxw:/\(\s*max\-width\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/,minmaxwh:/\(\s*m(in|ax)\-(height|width)\s*:\s*(\s*[0-9\.]+)(px|em)\s*\)/gi,other:/\([^\)]*\)/g},i.mediaQueriesSupported=t.matchMedia&&null!==t.matchMedia("only all")&&t.matchMedia("only all").matches,!i.mediaQueriesSupported){var r,l,h,c=t.document,d=c.documentElement,p=[],u=[],f=[],g={},m=30,v=c.getElementsByTagName("head")[0]||d,_=c.getElementsByTagName("base")[0],b=v.getElementsByTagName("link"),y=function(){var t,e=c.createElement("div"),i=c.body,n=d.style.fontSize,s=i&&i.style.fontSize,o=!1;return e.style.cssText="position:absolute;font-size:1em;width:1em",i||(i=o=c.createElement("body"),i.style.background="none"),d.style.fontSize="100%",i.style.fontSize="100%",i.appendChild(e),o&&d.insertBefore(i,d.firstChild),t=e.offsetWidth,o?d.removeChild(i):i.removeChild(e),d.style.fontSize=n,s&&(i.style.fontSize=s),t=h=parseFloat(t)},w=function(e){var i="clientWidth",n=d[i],s="CSS1Compat"===c.compatMode&&n||c.body[i]||n,o={},a=b[b.length-1],g=(new Date).getTime();if(e&&r&&g-r<m)return t.clearTimeout(l),void(l=t.setTimeout(w,m));r=g;for(var _ in p)if(p.hasOwnProperty(_)){var x=p[_],k=x.minw,E=x.maxw,T=null===k,C=null===E,$="em";k&&(k=parseFloat(k)*(k.indexOf($)>-1?h||y():1)),E&&(E=parseFloat(E)*(E.indexOf($)>-1?h||y():1)),x.hasquery&&(T&&C||!(T||s>=k)||!(C||s<=E))||(o[x.media]||(o[x.media]=[]),o[x.media].push(u[x.rules]))}for(var q in f)f.hasOwnProperty(q)&&f[q]&&f[q].parentNode===v&&v.removeChild(f[q]);f.length=0;for(var N in o)if(o.hasOwnProperty(N)){var S=c.createElement("style"),M=o[N].join("\n");S.type="text/css",S.media=N,v.insertBefore(S,a.nextSibling),S.styleSheet?S.styleSheet.cssText=M:S.appendChild(c.createTextNode(M)),f.push(S)}},x=function(t,e,n){var s=t.replace(i.regex.comments,"").replace(i.regex.keyframes,"").match(i.regex.media),o=s&&s.length||0;e=e.substring(0,e.lastIndexOf("/"));var r=function(t){return t.replace(i.regex.urls,"$1"+e+"$2$3")},l=!o&&n;e.length&&(e+="/"),l&&(o=1);for(var h=0;h<o;h++){var c,d,f,g;l?(c=n,u.push(r(t))):(c=s[h].match(i.regex.findStyles)&&RegExp.$1,u.push(RegExp.$2&&r(RegExp.$2))),f=c.split(","),g=f.length;for(var m=0;m<g;m++)d=f[m],a(d)||p.push({media:d.split("(")[0].match(i.regex.only)&&RegExp.$2||"all",rules:u.length-1,hasquery:d.indexOf("(")>-1,minw:d.match(i.regex.minw)&&parseFloat(RegExp.$1)+(RegExp.$2||""),maxw:d.match(i.regex.maxw)&&parseFloat(RegExp.$1)+(RegExp.$2||"")})}w()},k=function(){if(n.length){var e=n.shift();o(e.href,function(i){x(i,e.href,e.media),g[e.href]=!0,t.setTimeout(function(){k()},0)})}},E=function(){for(var e=0;e<b.length;e++){var i=b[e],s=i.href,o=i.media,a=i.rel&&"stylesheet"===i.rel.toLowerCase();s&&a&&!g[s]&&(i.styleSheet&&i.styleSheet.rawCssText?(x(i.styleSheet.rawCssText,s,o),g[s]=!0):(/^([a-zA-Z:]*\/\/)/.test(s)||_)&&s.replace(RegExp.$1,"").split("/")[0]!==t.location.host||("//"===s.substring(0,2)&&(s=t.location.protocol+s),n.push({href:s,media:o})))}k()};E(),i.update=E,i.getEmValue=y,t.addEventListener?t.addEventListener("resize",e,!1):t.attachEvent&&t.attachEvent("onresize",e)}}(this),define("respond",function(){}),define("lib/tools",["static/utils"],function(t){var e={pendingPrepare:[]};e.encloseTextWithTag=function(t,e){return"string"!=typeof t||0!==t.length&&"<"===t[0]?t:"<"+e+">"+t+"</"+e+">"},e.parseUrl=function(t,e,i){var n={body:null,query:null,hash:null},s=t.split("#");if(2===s.length){if("hash"===e)return s[1];n.hash=s[1]}if("hash"===e)return null;if(t=s[0],s=t.split("?"),2===s.length&&(n.query=s[1]),n.body=s[0],"undefined"!=typeof i&&i){var o=n.query;if(n.query={},o)for(var a=o.split("&"),r=0;r<a.length;r++){var l=a[r];if(l.length){var h=l.split("=");n.query[h.shift()]=h.join("=")}}}return"undefined"!=typeof e&&e&&"undefined"!=typeof n[e]?n[e]:n},e.getUrlHash=function(){return window.location.hash.substr(1)},e.setUrlHash=function(t){"#"!==t.substr(0,1)&&(t="#"+t),t!==window.location.hash&&(window.location.hash=t)},e.isEmpty=function(t){var e=typeof t;if("undefined"===e||null===t||0===t||t===!1)return!0;if("string"===e&&0===$.trim(t).length)return!0;if("object"===e){if("number"==typeof t.length)return 0===t.length;if("function"==typeof Object&&"function"==typeof Object.keys)return 0===Object.keys(t).length;var i=0;for(var n in t)t.hasOwnProperty(n)&&i++;return 0===i}return!1},e.pad=function(t,e,i,n){"undefined"!=typeof n&&"left"===n||(n="right");for(var s=""+t;s.length<e;)"left"===n?s=i+s:s+=i;return s},e.ucfirst=function(t){return t[0].toUpperCase()+t.substr(1).toLowerCase()},e.cleanStr=function(t,i){return t=t.replace(new RegExp("[[\\]{}()*+?.,\\^$|#\\s]"),"\\$&"),i?e.translit(t):t},e.translit=function(t){return t.toLowerCase().replace(/[àáâãäå]/g,"a").replace(/æ/g,"ae").replace(/ç/g,"c").replace(/[èéêë]/g,"e").replace(/[ìíîï]/g,"i").replace(/ñ/g,"n").replace(/[òóôõö]/g,"o").replace(/œ/g,"oe").replace(/[ùúûü]/g,"u").replace(/[ýÿ]/g,"y")};var i={};e.preloadPicture=function(t,e){var n=t;if(e&&(n+=e+".jpg"),"undefined"==typeof i[n]){var s=new Image;s.src=n,i[n]=!0}},e.replaceThumbcast=function(t){for(var e=t.split(/(<script>|<\/script>)/g),i=0;i<e.length;i++)"<script>"===e[i]||"</script>"===e[i]?e[i]="":"document.write(xv.thumbs.replaceThumbUrl("===e[i].substr(0,41)?e[i]=window.xv.thumbs.replaceThumbUrl(e[i].substring(42,e[i].lastIndexOf("))")-1)):"xv.thumbs.casting.displayRandomThumb("===e[i].substr(0,37)?e[i]=window.xv.thumbs.casting.displayRandomThumb(e[i].substring(38,e[i].lastIndexOf(")")-1),!0):"document.write(xv.thumbs.replaceActGalThumbUrl("===e[i].substr(0,47)?e[i]=window.xv.thumbs.replaceActGalThumbUrl(e[i].substring(48,e[i].lastIndexOf("))")-1)):"document.write(xv.thumbs.replacePicThumbUrl("===e[i].substr(0,44)?e[i]=window.xv.thumbs.replacePicThumbUrl(e[i].substring(45,e[i].lastIndexOf("))")-1)):"xv.thumbs.prepareVideo("===e[i].substr(0,23)&&(e[i]="");return e.join("")},e.executePendingPrepare=function(t){t.each(function(){window.xv.thumbs.prepareVideo(this)})},e.scrollTo=function(t,e){"undefined"==typeof e&&(e=0),$("html,body").animate({scrollTop:$(t).offset().top-10-e})};var n=[];return e.loadRecaptcha=function(e,i){if("object"==typeof grecaptcha)return void e();if(n.push(e),!(n.length>1)){window.onToolsRecaptchaLoaded=function(){for(var t in n)n[t]()};var s="https://www.google.com/recaptcha/api.js?onload=onToolsRecaptchaLoaded&render=explicit";"string"==typeof i&&(s+="&hl="+i),t.loadScript(s)}},e}),function(t,e){"object"==typeof exports&&exports&&"string"!=typeof exports.nodeName?e(exports):"function"==typeof define&&define.amd?define("mustache",["exports"],e):(t.Mustache={},e(t.Mustache))}(this,function(t){function e(t){return"function"==typeof t}function i(t){return g(t)?"array":typeof t}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function s(t,e){return null!=t&&"object"==typeof t&&e in t}function o(t,e){return m.call(t,e)}function a(t){return!o(v,t)}function r(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return _[t]})}function l(e,i){function s(){if(v&&!_)for(;m.length;)delete f[m.pop()];else m=[];v=!1,_=!1}function o(t){if("string"==typeof t&&(t=t.split(y,2)),!g(t)||2!==t.length)throw new Error("Invalid tags: "+t);r=new RegExp(n(t[0])+"\\s*"),l=new RegExp("\\s*"+n(t[1])),p=new RegExp("\\s*"+n("}"+t[1]))}if(!e)return[];var r,l,p,u=[],f=[],m=[],v=!1,_=!1;o(i||t.tags);for(var E,T,C,$,q,N,S=new d(e);!S.eos();){if(E=S.pos,C=S.scanUntil(r))for(var M=0,P=C.length;M<P;++M)$=C.charAt(M),a($)?m.push(f.length):_=!0,f.push(["text",$,E,E+1]),E+=1,"\n"===$&&s();if(!S.scan(r))break;if(v=!0,T=S.scan(k)||"name",S.scan(b),"="===T?(C=S.scanUntil(w),S.scan(w),S.scanUntil(l)):"{"===T?(C=S.scanUntil(p),S.scan(x),S.scanUntil(l),T="&"):C=S.scanUntil(l),!S.scan(l))throw new Error("Unclosed tag at "+S.pos);if(q=[T,C,E,S.pos],f.push(q),"#"===T||"^"===T)u.push(q);else if("/"===T){if(N=u.pop(),!N)throw new Error('Unopened section "'+C+'" at '+E);if(N[1]!==C)throw new Error('Unclosed section "'+N[1]+'" at '+E)}else"name"===T||"{"===T||"&"===T?_=!0:"="===T&&o(C)}if(N=u.pop())throw new Error('Unclosed section "'+N[1]+'" at '+S.pos);return c(h(f))}function h(t){for(var e,i,n=[],s=0,o=t.length;s<o;++s)e=t[s],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(n.push(e),i=e));return n}function c(t){for(var e,i,n=[],s=n,o=[],a=0,r=t.length;a<r;++a)switch(e=t[a],e[0]){case"#":case"^":s.push(e),o.push(e),s=e[4]=[];break;case"/":i=o.pop(),i[5]=e[2],s=o.length>0?o[o.length-1][4]:n;break;default:s.push(e)}return n}function d(t){this.string=t,this.tail=t,this.pos=0}function p(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function u(){this.cache={}}var f=Object.prototype.toString,g=Array.isArray||function(t){return"[object Array]"===f.call(t)},m=RegExp.prototype.test,v=/\S/,_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},b=/\s*/,y=/\s+/,w=/\s*=/,x=/\s*\}/,k=/#|\^|\/|>|\{|&|=|!/;d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},d.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},p.prototype.push=function(t){return new p(t,this)},p.prototype.lookup=function(t){var i,n=this.cache;if(n.hasOwnProperty(t))i=n[t];else{for(var o,a,r=this,l=!1;r;){if(t.indexOf(".")>0)for(i=r.view,o=t.split("."),a=0;null!=i&&a<o.length;)a===o.length-1&&(l=s(i,o[a])),i=i[o[a++]];else i=r.view[t],l=s(r.view,t);if(l)break;r=r.parent}n[t]=i}return e(i)&&(i=i.call(this.view)),i},u.prototype.clearCache=function(){this.cache={}},u.prototype.parse=function(e,i){var n=this.cache,s=e+":"+(i||t.tags).join(":"),o=n[s];return null==o&&(o=n[s]=l(e,i)),o},u.prototype.render=function(t,e,i){var n=this.parse(t),s=e instanceof p?e:new p(e);return this.renderTokens(n,s,i,t)},u.prototype.renderTokens=function(t,e,i,n){for(var s,o,a,r="",l=0,h=t.length;l<h;++l)a=void 0,s=t[l],o=s[0],"#"===o?a=this.renderSection(s,e,i,n):"^"===o?a=this.renderInverted(s,e,i,n):">"===o?a=this.renderPartial(s,e,i,n):"&"===o?a=this.unescapedValue(s,e):"name"===o?a=this.escapedValue(s,e):"text"===o&&(a=this.rawValue(s)),void 0!==a&&(r+=a);return r},u.prototype.renderSection=function(t,i,n,s){function o(t){return a.render(t,i,n)}var a=this,r="",l=i.lookup(t[1]);if(l){if(g(l))for(var h=0,c=l.length;h<c;++h)r+=this.renderTokens(t[4],i.push(l[h]),n,s);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)r+=this.renderTokens(t[4],i.push(l),n,s);else if(e(l)){if("string"!=typeof s)throw new Error("Cannot use higher-order sections without the original template");l=l.call(i.view,s.slice(t[3],t[5]),o),null!=l&&(r+=l)}else r+=this.renderTokens(t[4],i,n,s);return r}},u.prototype.renderInverted=function(t,e,i,n){var s=e.lookup(t[1]);if(!s||g(s)&&0===s.length)return this.renderTokens(t[4],e,i,n)},u.prototype.renderPartial=function(t,i,n){if(n){var s=e(n)?n(t[1]):n[t[1]];return null!=s?this.renderTokens(this.parse(s),i,n,s):void 0}},u.prototype.unescapedValue=function(t,e){var i=e.lookup(t[1]);if(null!=i)return i},u.prototype.escapedValue=function(e,i){var n=i.lookup(e[1]);if(null!=n)return t.escape(n)},u.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.3.1",t.tags=["{{","}}"];var E=new u;return t.clearCache=function(){return E.clearCache()},t.parse=function(t,e){return E.parse(t,e)},t.render=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+i(t)+'" was given as the first argument for mustache#render(template, view, partials)');return E.render(t,e,n)},t.to_html=function(i,n,s,o){var a=t.render(i,n,s);return e(o)?void o(a):a},t.escape=r,t.Scanner=d,t.Context=p,t.Writer=u,t}),define("text",["module"],function(t){"use strict";function e(t,e){return void 0===t||""===t?e:t}function i(t,i,n,s){if(i===s)return!0;if(t===n){if("http"===t)return e(i,"80")===e(s,"80");if("https"===t)return e(i,"443")===e(s,"443")}return!1}var n,s,o,a,r,l=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],h=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,c=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,p=d&&location.protocol&&location.protocol.replace(/\:/,""),u=d&&location.hostname,f=d&&(location.port||void 0),g={},m=t.config&&t.config()||{};return n={version:"2.0.15",strip:function(t){if(t){t=t.replace(h,"");var e=t.match(c);e&&(t=e[1])}else t="";return t},jsEscape:function(t){return t.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:m.createXhr||function(){var t,e,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(e=0;e<3;e+=1){i=l[e];try{t=new ActiveXObject(i)}catch(n){}if(t){l=[i];break}}return t},parseName:function(t){var e,i,n,s=!1,o=t.lastIndexOf("."),a=0===t.indexOf("./")||0===t.indexOf("../");return o!==-1&&(!a||o>1)?(e=t.substring(0,o),i=t.substring(o+1)):e=t,n=i||e,o=n.indexOf("!"),o!==-1&&(s="strip"===n.substring(o+1),n=n.substring(0,o),i?i=n:e=n),{moduleName:e,ext:i,strip:s}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(t,e,s,o){var a,r,l,h=n.xdRegExp.exec(t);return!h||(a=h[2],r=h[3],r=r.split(":"),l=r[1],r=r[0],(!a||a===e)&&(!r||r.toLowerCase()===s.toLowerCase())&&(!l&&!r||i(a,l,e,o)))},finishLoad:function(t,e,i,s){i=e?n.strip(i):i,m.isBuild&&(g[t]=i),s(i)},load:function(t,e,i,s){if(s&&s.isBuild&&!s.inlineText)return void i();m.isBuild=s&&s.isBuild;var o=n.parseName(t),a=o.moduleName+(o.ext?"."+o.ext:""),r=e.toUrl(a),l=m.useXhr||n.useXhr;return 0===r.indexOf("empty:")?void i():void(!d||l(r,p,u,f)?n.get(r,function(e){n.finishLoad(t,o.strip,e,i)},function(t){i.error&&i.error(t)}):e([a],function(t){n.finishLoad(o.moduleName+"."+o.ext,o.strip,t,i)}))},write:function(t,e,i,s){if(g.hasOwnProperty(e)){var o=n.jsEscape(g[e]);i.asModule(t+"!"+e,"define(function () { return '"+o+"';});\n")}},writeFile:function(t,e,i,s,o){var a=n.parseName(e),r=a.ext?"."+a.ext:"",l=a.moduleName+r,h=i.toUrl(a.moduleName+r)+".js";n.load(l,i,function(e){var i=function(t){return s(h,t)};i.asModule=function(t,e){return s.asModule(t,h,e)},n.write(t,l,i,o)},o)}},"node"===m.env||!m.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"]?(s=require.nodeRequire("fs"),n.get=function(t,e,i){try{var n=s.readFileSync(t,"utf8");"\ufeff"===n[0]&&(n=n.substring(1)),e(n)}catch(o){i&&i(o)}}):"xhr"===m.env||!m.env&&n.createXhr()?n.get=function(t,e,i,s){var o,a=n.createXhr();if(a.open("GET",t,!0),s)for(o in s)s.hasOwnProperty(o)&&a.setRequestHeader(o.toLowerCase(),s[o]);m.onXhr&&m.onXhr(a,t),a.onreadystatechange=function(n){var s,o;4===a.readyState&&(s=a.status||0,s>399&&s<600?(o=new Error(t+" HTTP status: "+s),o.xhr=a,i&&i(o)):e(a.responseText),m.onXhrComplete&&m.onXhrComplete(a,t))},a.send(null)}:"rhino"===m.env||!m.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?n.get=function(t,e){var i,n,s="utf-8",o=new java.io.File(t),a=java.lang.System.getProperty("line.separator"),r=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(o),s)),l="";try{for(i=new java.lang.StringBuffer,n=r.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=r.readLine());)i.append(a),i.append(n);l=String(i.toString())}finally{r.close()}e(l)}:("xpconnect"===m.env||!m.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(o=Components.classes,a=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in o,n.get=function(t,e){var i,n,s,l={};r&&(t=t.replace(/\//g,"\\")),s=new FileUtils.File(t);try{i=o["@mozilla.org/network/file-input-stream;1"].createInstance(a.nsIFileInputStream),i.init(s,1,0,!1),n=o["@mozilla.org/intl/converter-input-stream;1"].createInstance(a.nsIConverterInputStream),n.init(i,"utf-8",i.available(),a.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),n.readString(i.available(),l),n.close(),i.close(),e(l.value)}catch(h){throw new Error((s&&s.path||"")+": "+h)}}),n}),define("text!lib/helpers/loader/before.html",[],function(){return'<span class="x-loader-inline before{{#is_button}} btn btn-default{{/is_button}}"{{#id}} id="{{id}}"{{/id}}>{{{ loader }}}{{#text}}{{#safe}}{{{ text }}}{{/safe}}{{^safe}}{{ text }}{{/safe}} {{/text}}</span>'}),define("text!lib/helpers/loader/after.html",[],function(){return'<span class="x-loader-inline after{{#is_button}} btn btn-default{{/is_button}}"{{#id}} id="{{id}}"{{/id}}>{{#text}}{{#safe}}{{{ text }}}{{/safe}}{{^safe}}{{ text }}{{/safe}} {{/text}}{{{ loader }}}</span>'}),define("lib/helpers/inline_loader",["lib/tools","mustache","text!./loader/before.html","text!./loader/after.html"],function(t,e,i,n){var s="",o=-1,a=function(t){return"before"===t||"button_before"===t?i:n},r=function(t){return"undefined"!=typeof t?t:(o++,"_x_loader_"+o)},l=function(t,i,n,s){"string"!=typeof t&&(t="after"),this.html=e.render(a(t),{id:r(n),text:i,is_button:0===t.indexOf("button_"),loader:l.getImg(),safe:!!s}),this.node=!1};return l.setup=function(e){t.preloadPicture(e),s='<img class="x-loader-inline-img" src="'+e+'" />'},l.get=function(t,e,i){return new l(t,e,i)},l.getSafe=function(t,e,i){return new l(t,e,i,!0)},l.getImg=function(){return 0===s.length&&console.error("Loader image not setup"),s},l.prototype={getHtml:function(){return this.html},getNode:function(){return this.node||(this.node=$(this.html)),this.node},appendTo:function(t){return this.getNode().appendTo(t),this},prependTo:function(t){return this.getNode().prependTo(t),this},insertAfter:function(t){return this.getNode().insertAfter(t),this},insertBefore:function(t){return this.getNode().insertBefore(t),this},detach:function(){return this.getNode().detach(),this},remove:function(){this.node&&this.node.remove()}},l}),define("text!lib/helpers/popup/template.html",[],function(){return'<div class="x-popup {{ position }} {{ cls }}">\n\t<div class="x-popup-arrow"></div>\n\t<div class="x-popup-content"></div>\n\t{{#closebtn}}<div class="x-popup-close">x</div>{{/closebtn}}\n</div>\n'}),define("lib/helpers/popup",["mustache","text!./popup/template.html"],function(t,e){var i=[],n={relative_to:$(document.body),position:{v:"below",h:"right"},offset:{below:0,above:0,left:0,right:0},max_height:0,max_width:0,trigger:"click",autoclose:!0,closebtn:!1,template:e,popup_class:null,pos_on_scroll:!1},s=function(t,e,s){if(this.options=$.extend({},n,s||{}),this.setPosition(this.options.position,!0),this.button=t,this.content=e,this.opened=!1,this.autoclose_timer=!1,this.options.trigger){var o=this;this.button.on(this.options.trigger,function(){o.toggle()})}i.push(this)};s.prototype={onOpen:null,onClose:null,setButton:function(t){return this.button.is(t)?this:(this.button=t,this.position(),this)},setContent:function(t){return this.popup.find(".x-popup-content").empty().append($(t)),this.position(),this},setPosition:function(t,e){return"object"==typeof t?!t.v||!t.h||"below"!==t.v&&"above"!==t.v||"right"!==t.h&&"left"!==t.h?(e&&(this.options.position=n.position),!1):(this.options.position=t,!0):(t=t.split(" "),2!==t.length||"below"!==t[0]&&"above"!==t[0]||"right"!==t[1]&&"left"!==t[1]?(e&&(this.options.position=n.position),!1):(this.options.position={v:t[0],h:t[1]},!0))},position:function(){if(!this.popup)return!1;var t=this.options.relative_to.offset(),e=this.button.offset();this.button.parents().each(function(){if("fixed"===$(this).css("position"))return e.top-=$(this).offset().top,!1});var i=e.top-t.top,n=e.left-t.left,s=!1,o=!1,a=this.popup.children(".x-popup-arrow");switch(this.options.position.v){case"below":i+=this.button.outerHeight(),a.length>0&&(i+=parseInt(a.css("border-bottom-width").replace("px",""))),"number"==typeof this.options.offset.below&&(i+=this.options.offset.below);break;case"above":s=this.options.relative_to.innerHeight()-i,a.length>0&&(s+=parseInt(a.css("border-bottom-width").replace("px",""))),"number"==typeof this.options.offset.above&&(s+=this.options.offset.above)}switch(this.options.position.h){case"right":o=this.options.relative_to.innerWidth()-n-this.button.outerWidth(),"number"==typeof this.options.offset.right&&(o+=this.options.offset.right);break;case"left":"number"==typeof this.options.offset.left&&(n+=this.options.offset.left)}this.popup.css("max-width","none"),o!==!1?(this.popup.css("right",o+"px"),a.css("right","")):(this.popup.css("left",n+"px"),a.css("left","")),s!==!1?this.popup.css("bottom",s+"px"):this.popup.css("top",i+"px");var r=this.popup.position();if(o!==!1){if(r.left>=2)return!0;var l=this.popup.outerWidth(),h=$("body").outerWidth(!0)-4;if(l>h&&(l=h,this.popup.css("max-width",l+"px")),r=this.popup.position(),r.left>=2)return!0;var c=parseInt(a.css("right").replace("px",""));return this.popup.css("right",o+r.left-2+"px"),a.css("right",c-r.left+2+"px"),!0}var l=this.popup.outerWidth(),h=$("body").outerWidth(!0)-2;if(r.left+l<=h)return!0;l>h-2&&(l=h-2,this.popup.css("max-width",l+"px"));var c=parseInt(a.css("left").replace("px","")),d=r.left+l-h;return this.popup.css("left",n-d+"px"),a.css("left",c+d+"px"),!0},_getPopup:function(){if(this.popup)return this.popup;this.opened=!0,this.popup=$(t.render(this.options.template,{position:this.options.position.v+" "+this.options.position.h,cls:this.options.popup_class,closebtn:this.options.closebtn}));var e;e="function"==typeof this.content?$(this.content()):$(this.content);var i=this.popup.find(".x-popup-content").append(e);this.options.max_height>0&&i.css("max-height",this.options.max_height+"px"),this.options.max_width>0&&i.css("max-width",this.options.max_width+"px");var n=this.options.relative_to.css("position");if("relative"!=n&&"absolute"!=n&&"fixed"!=n&&this.options.relative_to.css("position","relative"),this.options.relative_to.append(this.popup),this.position(),this.popup.on("click",function(t){t.stopPropagation()}),this.options.autoclose&&"number"!=typeof this.options.autoclose){var s=this;$("body").on("click",function(t){s.opened&&0===$(t.target).closest(s.button).length&&s.close()})}if(this.options.closebtn){var s=this;this.popup.children(".x-popup-close").on("click",function(){s.close()})}return this.onOpen&&this.onOpen(),this.popup},open:function(t){t&&(t.preventDefault(),t.stopPropagation()),this._getPopup();var e=this;"number"==typeof this.options.autoclose&&this.options.autoclose>0&&(this.autoclose_timer!==!1&&(clearTimeout(this.autoclose_timer),this.autoclose_timer=!1),this.autoclose_timer=setTimeout(function(){e.close()},this.options.autoclose)),this.opened||(this.opened=!0,this.popup.fadeIn(),this.position(),this.onOpen&&this.onOpen())},close:function(){this.opened&&(this.opened=!1,this.popup.fadeOut(),this.onClose&&this.onClose())},toggle:function(){return this.opened?void this.close():void this.open()},isOpened:function(){return this.opened}},$(window).resize(function(){for(var t in i)i[t].isOpened()&&i[t].position()});var o,a=function(){for(var t in i)i[t].isOpened()&&i[t].options.pos_on_scroll&&i[t].position()};return $(window).scroll(function(){o&&window.clearTimeout(o),o=window.setTimeout(a,500)}),s}),define("text!lib/helpers/popup/language_switcher.html",[],function(){return'<ul>\n\t{{#languages}}\n\t<li><a href="{{{ url }}}"><span class="flag-small flag-{{{ country }}}"></span> {{ name }}</a></li>\n\t{{/languages}}\n</ul>'}),define("lib/helpers/popup/language_switcher",["mustache","../popup","text!./language_switcher.html"],function(t,e,i){var n=function(n,s,o,a){var r=function(){var e=[];for(var n in o)e.push({url:s+n,country:o[n].country.toLowerCase(),name:o[n].translated});return t.render(i,{languages:e})};"object"!=typeof a&&(a={}),"undefined"==typeof a.trigger&&(a.trigger="click mouseclick"),"undefined"==typeof a.popup_class&&(a.popup_class="language-switcher-popup"),"undefined"==typeof a.offset&&(a.offset={below:-7,above:0,left:0,right:0}),new e(n,r,a)};return n}),define("lib/helpers/bookmark",[],function(){var t=function(t,e,i){t=$(t),t.data("bookmark-title")&&(i=t.data("bookmark-title")),t.on("click",function(n){if(window.sidebar&&window.sidebar.addPanel)window.sidebar.addPanel(e,i,"");else if(window.external&&"AddFavorite"in window.external)window.external.AddFavorite(e,i);else{if(window.opera&&window.print||window.sidebar&&!(window.sidebar instanceof Node))return t.attr("rel","sidebar").attr("title",i),!0;alert("Press "+(navigator.userAgent.toLowerCase().indexOf("mac")!==-1?"Command/Cmd":"CTRL")+" + D to bookmark this page.")}return n.preventDefault(),!1})};return t}),define("lib/helpers/events/scroll",[],function(){var t=[],e=[],i=!1,n=null;$(window).on("scroll",function(){if(!i)for(var s in t)t[s]();i=!0,clearTimeout(n),n=setTimeout(function(){i=!1;for(var t in e)e[t]()},200)});var s={addScrollStartListener:function(e){t.push(e)},addScrollEndListener:function(t){e.push(t)},isScrolling:function(){return i}};return s}),define("lib/helpers/events/tab",[],function(){function t(t){t=t||window.event;var o;if(o=t.type in r?r[t.type]:this[s]?"hidden":"visible",e!==o)if(e=o,"hidden"===o)for(var a in n)n[a]();else for(var a in i)i[a]()}var e,i=[],n=[],s="hidden",o="visible",a="hidden",r={focus:o,focusin:o,pageshow:o,blur:a,focusout:a,pagehide:a};s in document?document.addEventListener("visibilitychange",t):(s="mozHidden")in document?document.addEventListener("mozvisibilitychange",t):(s="webkitHidden")in document?document.addEventListener("webkitvisibilitychange",t):(s="msHidden")in document?document.addEventListener("msvisibilitychange",t):"onfocusin"in document?document.onfocusin=document.onfocusout=t:window.onpageshow=window.onpagehide=window.onfocus=window.onblur=t,$(window).on("blur",t),$(window).on("focus",t);var l={addHiddenListener:function(t){n.push(t)},addVisibleListener:function(t){i.push(t)}};return l}),define("lib/helpers/events",["lib/helpers/events/scroll"],function(t){var e=0,i=function(){this.thlistener,this.thlisteners=[],this.tvlistener,this.tvlisteners=[],this.sslisteners=[],this.selisteners=[]};return i.prototype={TAB_HIDDEN:"tab.hidden",TAB_VISIBLE:"tab.visible",SCROLL_START:"scroll.start",SCROLL_END:"scroll.end",addListener:function(t,i){switch(t){case this.TAB_HIDDEN:if(this.thlisteners[e]=i,!this.thlistener){this.thlistener=!0;var n=this;require(["lib/helpers/events/tab"],function(t){t.addHiddenListener(function(){for(var t in n.thlisteners)n.thlisteners[t]()})})}return e++,e-1;case this.TAB_VISIBLE:if(this.tvlisteners[e]=i,!this.tvlistener){this.tvlistener=!0;var n=this;require(["lib/helpers/events/tab"],function(t){t.addVisibleListener(function(){for(var t in n.tvlisteners)n.tvlisteners[t]()})})}return e++,e-1;case this.SCROLL_START:return this.sslisteners[e]=i,e++,e-1;case this.SCROLL_END:return this.selisteners[e]=i,e++,e-1}return!1},isScrolling:function(){return t.isScrolling()}},new i}),function(t){function e(){var t=a();t!==r&&(r=t,c.trigger("orientationchange"))}function i(e,i,n,s){var o=n.type;n.type=i,t.event.dispatch.call(e,n,s),n.type=o}t.attrFn=t.attrFn||{};var n="ontouchstart"in window,s={tap_pixel_range:5,swipe_h_threshold:50,swipe_v_threshold:50,taphold_threshold:750,doubletap_int:500,shake_threshold:15,touch_capable:n,orientation_support:"orientation"in window&&"onorientationchange"in window,startevent:n?"touchstart":"mousedown",endevent:n?"touchend":"mouseup",moveevent:n?"touchmove":"mousemove",tapevent:n?"tap":"click",scrollevent:n?"touchmove":"scroll",hold_timer:null,tap_timer:null};t.touch={},t.isTouchCapable=function(){return s.touch_capable},t.getStartEvent=function(){return s.startevent},t.getEndEvent=function(){return s.endevent},t.getMoveEvent=function(){return s.moveevent},t.getTapEvent=function(){return s.tapevent},t.getScrollEvent=function(){return s.scrollevent},t.touch.setSwipeThresholdX=function(t){if("number"!=typeof t)throw new Error("Threshold parameter must be a type of number");s.swipe_h_threshold=t},t.touch.setSwipeThresholdY=function(t){if("number"!=typeof t)throw new Error("Threshold parameter must be a type of number");s.swipe_v_threshold=t},t.touch.setDoubleTapInt=function(t){if("number"!=typeof t)throw new Error("Interval parameter must be a type of number");s.doubletap_int=t},t.touch.setTapHoldThreshold=function(t){if("number"!=typeof t)throw new Error("Threshold parameter must be a type of number");s.taphold_threshold=t},t.touch.setTapRange=function(t){if("number"!=typeof t)throw new Error("Ranger parameter must be a type of number");s.tap_pixel_range=threshold},t.each(["tapstart","tapend","tapmove","tap","singletap","doubletap","taphold","swipe","swipeup","swiperight","swipedown","swipeleft","swipeend","scrollstart","scrollend","orientationchange","tap2","taphold2"],function(e,i){t.fn[i]=function(t){return t?this.on(i,t):this.trigger(i)},t.attrFn[i]=!0}),t.event.special.tapstart={setup:function(){var e=this,n=t(e);n.on(s.startevent,function o(t){if(n.data("callee",o),t.which&&1!==t.which)return!1;var a=t.originalEvent,r={position:{x:s.touch_capable?a.touches[0].pageX:t.pageX,y:s.touch_capable?a.touches[0].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(a.changedTouches[0].pageX-(n.offset()?n.offset().left:0)):Math.round(t.pageX-(n.offset()?n.offset().left:0)),y:s.touch_capable?Math.round(a.changedTouches[0].pageY-(n.offset()?n.offset().top:0)):Math.round(t.pageY-(n.offset()?n.offset().top:0))},time:Date.now(),target:t.target};return i(e,"tapstart",t,r),!0})},remove:function(){t(this).off(s.startevent,t(this).data.callee)}},t.event.special.tapmove={setup:function(){var e=this,n=t(e);n.on(s.moveevent,function o(t){n.data("callee",o);var a=t.originalEvent,r={position:{x:s.touch_capable?a.touches[0].pageX:t.pageX,y:s.touch_capable?a.touches[0].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(a.changedTouches[0].pageX-(n.offset()?n.offset().left:0)):Math.round(t.pageX-(n.offset()?n.offset().left:0)),y:s.touch_capable?Math.round(a.changedTouches[0].pageY-(n.offset()?n.offset().top:0)):Math.round(t.pageY-(n.offset()?n.offset().top:0))},time:Date.now(),target:t.target};return i(e,"tapmove",t,r),!0})},remove:function(){t(this).off(s.moveevent,t(this).data.callee)}},t.event.special.tapend={setup:function(){var e=this,n=t(e);n.on(s.endevent,function o(t){n.data("callee",o);var a=t.originalEvent,r={position:{x:s.touch_capable?a.changedTouches[0].pageX:t.pageX,y:s.touch_capable?a.changedTouches[0].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(a.changedTouches[0].pageX-(n.offset()?n.offset().left:0)):Math.round(t.pageX-(n.offset()?n.offset().left:0)),y:s.touch_capable?Math.round(a.changedTouches[0].pageY-(n.offset()?n.offset().top:0)):Math.round(t.pageY-(n.offset()?n.offset().top:0))},time:Date.now(),target:t.target};return i(e,"tapend",t,r),!0})},remove:function(){t(this).off(s.endevent,t(this).data.callee)}},t.event.special.taphold={
setup:function(){var e,n=this,o=t(n),a={x:0,y:0},r=0,l=0;o.on(s.startevent,function h(t){if(t.which&&1!==t.which)return!1;o.data("tapheld",!1),e=t.target;var c=t.originalEvent,d=Date.now();({x:s.touch_capable?c.touches[0].pageX:t.pageX,y:s.touch_capable?c.touches[0].pageY:t.pageY}),{x:s.touch_capable?c.touches[0].pageX-c.touches[0].target.offsetLeft:t.offsetX,y:s.touch_capable?c.touches[0].pageY-c.touches[0].target.offsetTop:t.offsetY};a.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,a.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY,r=a.x,l=a.y;var p=o.parent().data("threshold")?o.parent().data("threshold"):o.data("threshold"),u="undefined"!=typeof p&&p!==!1&&parseInt(p)?parseInt(p):s.taphold_threshold;return s.hold_timer=window.setTimeout(function(){var p=a.x-r,u=a.y-l;if(t.target==e&&(a.x==r&&a.y==l||p>=-s.tap_pixel_range&&p<=s.tap_pixel_range&&u>=-s.tap_pixel_range&&u<=s.tap_pixel_range)){o.data("tapheld",!0);for(var f=Date.now(),g=f-d,m=t.originalEvent.targetTouches?t.originalEvent.targetTouches:[t],v=[],_=0;_<m.length;_++){var b={position:{x:s.touch_capable?c.changedTouches[_].pageX:t.pageX,y:s.touch_capable?c.changedTouches[_].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(c.changedTouches[_].pageX-(o.offset()?o.offset().left:0)):Math.round(t.pageX-(o.offset()?o.offset().left:0)),y:s.touch_capable?Math.round(c.changedTouches[_].pageY-(o.offset()?o.offset().top:0)):Math.round(t.pageY-(o.offset()?o.offset().top:0))},time:Date.now(),target:t.target,duration:g};v.push(b)}var y=2==m.length?"taphold2":"taphold";o.data("callee1",h),i(n,y,t,v)}},u),!0}).on(s.endevent,function c(){o.data("callee2",c),o.data("tapheld",!1),window.clearTimeout(s.hold_timer)}).on(s.moveevent,function d(t){o.data("callee3",d),r=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,l=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY})},remove:function(){t(this).off(s.startevent,t(this).data.callee1).off(s.endevent,t(this).data.callee2).off(s.moveevent,t(this).data.callee3)}},t.event.special.doubletap={setup:function(){var e,n,o,a,r=this,l=t(r),h=null,c=!1;l.on(s.startevent,function d(i){return(!i.which||1===i.which)&&(l.data("doubletapped",!1),e=i.target,l.data("callee1",d),o=i.originalEvent,h||(h={position:{x:s.touch_capable?o.touches[0].pageX:i.pageX,y:s.touch_capable?o.touches[0].pageY:i.pageY},offset:{x:s.touch_capable?Math.round(o.changedTouches[0].pageX-(l.offset()?l.offset().left:0)):Math.round(i.pageX-(l.offset()?l.offset().left:0)),y:s.touch_capable?Math.round(o.changedTouches[0].pageY-(l.offset()?l.offset().top:0)):Math.round(i.pageY-(l.offset()?l.offset().top:0))},time:Date.now(),target:i.target,element:i.originalEvent.srcElement,index:t(i.target).index()}),!0)}).on(s.endevent,function p(e){var d=Date.now(),u=l.data("lastTouch")||d+1,f=d-u;if(window.clearTimeout(n),l.data("callee2",p),f<s.doubletap_int&&t(e.target).index()==h.index&&f>100){l.data("doubletapped",!0),window.clearTimeout(s.tap_timer);var g={position:{x:s.touch_capable?e.originalEvent.changedTouches[0].pageX:e.pageX,y:s.touch_capable?e.originalEvent.changedTouches[0].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(o.changedTouches[0].pageX-(l.offset()?l.offset().left:0)):Math.round(e.pageX-(l.offset()?l.offset().left:0)),y:s.touch_capable?Math.round(o.changedTouches[0].pageY-(l.offset()?l.offset().top:0)):Math.round(e.pageY-(l.offset()?l.offset().top:0))},time:Date.now(),target:e.target,element:e.originalEvent.srcElement,index:t(e.target).index()},m={firstTap:h,secondTap:g,interval:g.time-h.time};c||(i(r,"doubletap",e,m),h=null),c=!0,a=window.setTimeout(function(){c=!1},s.doubletap_int)}else l.data("lastTouch",d),n=window.setTimeout(function(){h=null,window.clearTimeout(n)},s.doubletap_int,[e]);l.data("lastTouch",d)})},remove:function(){t(this).off(s.startevent,t(this).data.callee1).off(s.endevent,t(this).data.callee2)}},t.event.special.singletap={setup:function(){var e=this,n=t(e),o=null,a=null,r={x:0,y:0};n.on(s.startevent,function l(t){return(!t.which||1===t.which)&&(a=Date.now(),o=t.target,n.data("callee1",l),r.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,r.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY,!0)}).on(s.endevent,function h(t){if(n.data("callee2",h),t.target==o){var l=t.originalEvent.changedTouches?t.originalEvent.changedTouches[0].pageX:t.pageX,c=t.originalEvent.changedTouches?t.originalEvent.changedTouches[0].pageY:t.pageY;s.tap_timer=window.setTimeout(function(){var o=r.x-l,h=r.y-c;if(!n.data("doubletapped")&&!n.data("tapheld")&&(r.x==l&&r.y==c||o>=-s.tap_pixel_range&&o<=s.tap_pixel_range&&h>=-s.tap_pixel_range&&h<=s.tap_pixel_range)){var d=t.originalEvent,p={position:{x:s.touch_capable?d.changedTouches[0].pageX:t.pageX,y:s.touch_capable?d.changedTouches[0].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(d.changedTouches[0].pageX-(n.offset()?n.offset().left:0)):Math.round(t.pageX-(n.offset()?n.offset().left:0)),y:s.touch_capable?Math.round(d.changedTouches[0].pageY-(n.offset()?n.offset().top:0)):Math.round(t.pageY-(n.offset()?n.offset().top:0))},time:Date.now(),target:t.target};p.time-a<s.taphold_threshold&&i(e,"singletap",t,p)}},s.doubletap_int)}})},remove:function(){t(this).off(s.startevent,t(this).data.callee1).off(s.endevent,t(this).data.callee2)}},t.event.special.tap={setup:function(){var e,n,o=this,a=t(o),r=!1,l=null,h={x:0,y:0};a.on(s.startevent,function c(t){return a.data("callee1",c),(!t.which||1===t.which)&&(r=!0,h.x=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX,h.y=t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY,e=Date.now(),l=t.target,n=t.originalEvent.targetTouches?t.originalEvent.targetTouches:[t],!0)}).on(s.endevent,function d(t){a.data("callee2",d);var c=t.originalEvent.targetTouches?t.originalEvent.changedTouches[0].pageX:t.pageX,p=t.originalEvent.targetTouches?t.originalEvent.changedTouches[0].pageY:t.pageY,u=h.x-c,f=h.y-p;if(l==t.target&&r&&Date.now()-e<s.taphold_threshold&&(h.x==c&&h.y==p||u>=-s.tap_pixel_range&&u<=s.tap_pixel_range&&f>=-s.tap_pixel_range&&f<=s.tap_pixel_range)){for(var g=t.originalEvent,m=[],v=0;v<n.length;v++){var _={position:{x:s.touch_capable?g.changedTouches[v].pageX:t.pageX,y:s.touch_capable?g.changedTouches[v].pageY:t.pageY},offset:{x:s.touch_capable?Math.round(g.changedTouches[v].pageX-(a.offset()?a.offset().left:0)):Math.round(t.pageX-(a.offset()?a.offset().left:0)),y:s.touch_capable?Math.round(g.changedTouches[v].pageY-(a.offset()?a.offset().top:0)):Math.round(t.pageY-(a.offset()?a.offset().top:0))},time:Date.now(),target:t.target};m.push(_)}var b=2==n.length?"tap2":"tap";i(o,b,t,m)}})},remove:function(){t(this).off(s.startevent,t(this).data.callee1).off(s.endevent,t(this).data.callee2)}},t.event.special.swipe={setup:function(){function e(i){r=t(i.currentTarget),r.data("callee1",e),c.x=i.originalEvent.targetTouches?i.originalEvent.targetTouches[0].pageX:i.pageX,c.y=i.originalEvent.targetTouches?i.originalEvent.targetTouches[0].pageY:i.pageY,d.x=c.x,d.y=c.y,l=!0;var n=i.originalEvent;o={position:{x:s.touch_capable?n.touches[0].pageX:i.pageX,y:s.touch_capable?n.touches[0].pageY:i.pageY},offset:{x:s.touch_capable?Math.round(n.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(i.pageX-(r.offset()?r.offset().left:0)),y:s.touch_capable?Math.round(n.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(i.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:i.target}}function i(e){r=t(e.currentTarget),r.data("callee2",i),d.x=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageX:e.pageX,d.y=e.originalEvent.targetTouches?e.originalEvent.targetTouches[0].pageY:e.pageY;var n,a=r.parent().data("xthreshold")?r.parent().data("xthreshold"):r.data("xthreshold"),p=r.parent().data("ythreshold")?r.parent().data("ythreshold"):r.data("ythreshold"),u="undefined"!=typeof a&&a!==!1&&parseInt(a)?parseInt(a):s.swipe_h_threshold,f="undefined"!=typeof p&&p!==!1&&parseInt(p)?parseInt(p):s.swipe_v_threshold;if(c.y>d.y&&c.y-d.y>f&&(n="swipeup"),c.x<d.x&&d.x-c.x>u&&(n="swiperight"),c.y<d.y&&d.y-c.y>f&&(n="swipedown"),c.x>d.x&&c.x-d.x>u&&(n="swipeleft"),void 0!=n&&l){c.x=0,c.y=0,d.x=0,d.y=0,l=!1;var g=e.originalEvent,m={position:{x:s.touch_capable?g.touches[0].pageX:e.pageX,y:s.touch_capable?g.touches[0].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(g.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(e.pageX-(r.offset()?r.offset().left:0)),y:s.touch_capable?Math.round(g.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(e.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:e.target},v=Math.abs(o.position.x-m.position.x),_=Math.abs(o.position.y-m.position.y),b={startEvnt:o,endEvnt:m,direction:n.replace("swipe",""),xAmount:v,yAmount:_,duration:m.time-o.time};h=!0,r.trigger("swipe",b).trigger(n,b)}}function n(e){r=t(e.currentTarget);var i="";if(r.data("callee3",n),h){var a=r.data("xthreshold"),c=r.data("ythreshold"),d="undefined"!=typeof a&&a!==!1&&parseInt(a)?parseInt(a):s.swipe_h_threshold,p="undefined"!=typeof c&&c!==!1&&parseInt(c)?parseInt(c):s.swipe_v_threshold,u=e.originalEvent,f={position:{x:s.touch_capable?u.changedTouches[0].pageX:e.pageX,y:s.touch_capable?u.changedTouches[0].pageY:e.pageY},offset:{x:s.touch_capable?Math.round(u.changedTouches[0].pageX-(r.offset()?r.offset().left:0)):Math.round(e.pageX-(r.offset()?r.offset().left:0)),y:s.touch_capable?Math.round(u.changedTouches[0].pageY-(r.offset()?r.offset().top:0)):Math.round(e.pageY-(r.offset()?r.offset().top:0))},time:Date.now(),target:e.target};o.position.y>f.position.y&&o.position.y-f.position.y>p&&(i="swipeup"),o.position.x<f.position.x&&f.position.x-o.position.x>d&&(i="swiperight"),o.position.y<f.position.y&&f.position.y-o.position.y>p&&(i="swipedown"),o.position.x>f.position.x&&o.position.x-f.position.x>d&&(i="swipeleft");var g=Math.abs(o.position.x-f.position.x),m=Math.abs(o.position.y-f.position.y),v={startEvnt:o,endEvnt:f,direction:i.replace("swipe",""),xAmount:g,yAmount:m,duration:f.time-o.time};r.trigger("swipeend",v)}l=!1,h=!1}var o,a=this,r=t(a),l=!1,h=!1,c={x:0,y:0},d={x:0,y:0};r.on(s.startevent,e),r.on(s.moveevent,i),r.on(s.endevent,n)},remove:function(){t(this).off(s.startevent,t(this).data.callee1).off(s.moveevent,t(this).data.callee2).off(s.endevent,t(this).data.callee3)}},t.event.special.scrollstart={setup:function(){function e(t,e){n=e,i(a,n?"scrollstart":"scrollend",t)}var n,o,a=this,r=t(a);r.on(s.scrollevent,function l(t){r.data("callee",l),n||e(t,!0),clearTimeout(o),o=setTimeout(function(){e(t,!1)},50)})},remove:function(){t(this).off(s.scrollevent,t(this).data.callee)}};var o,a,r,l,h,c=t(window),d={0:!0,180:!0};if(s.orientation_support){var p=window.innerWidth||c.width(),u=window.innerHeight||c.height(),f=50;l=p>u&&p-u>f,h=d[window.orientation],(l&&h||!l&&!h)&&(d={"-90":!0,90:!0})}t.event.special.orientationchange=o={setup:function(){return!s.orientation_support&&(r=a(),c.on("throttledresize",e),!0)},teardown:function(){return!s.orientation_support&&(c.off("throttledresize",e),!0)},add:function(t){var e=t.handler;t.handler=function(t){return t.orientation=a(),e.apply(this,arguments)}}},t.event.special.orientationchange.orientation=a=function(){var t=!0,e=document.documentElement;return t=s.orientation_support?d[window.orientation]:e&&e.clientWidth/e.clientHeight<1.1,t?"portrait":"landscape"},t.event.special.throttledresize={setup:function(){t(this).on("resize",b)},teardown:function(){t(this).off("resize",b)}};var g,m,v,_=250,b=function(){m=Date.now(),v=m-y,v>=_?(y=m,t(this).trigger("throttledresize")):(g&&window.clearTimeout(g),g=window.setTimeout(e,_-v))},y=0;t.each({scrollend:"scrollstart",swipeup:"swipe",swiperight:"swipe",swipedown:"swipe",swipeleft:"swipe",swipeend:"swipe",tap2:"tap",taphold2:"taphold"},function(e,i){t.event.special[e]={setup:function(){t(this).on(i,t.noop)}}})}(jQuery),define("jquery-mobile-events",function(){}),define("lib/helpers/thumbs/mozaique",["lib/tools"],function(t){var e,i=function(t){return t++,t>9?0:t},n=function(t,e,i){return t++,t>=e?i?-1:0:t},s=function(t,i){var n=Math.floor((t-1)/3);return 0===n?"0%":n*-1*(e?100:i?56.25:75)+"%"},o=function(t){this.rotator=t,this.name=t.ENGINE_MOZAIQUE,this.is_video_engine=!1,this.thumb,this.ori_src,this.is_profile_pic,this.is_video_pic,this.is_16_9,this.idx,this.mozaique,this.videos,this.timer};return o.prototype={startVideoPic:function(t){var e=this;this.thumb=t;var i=this.thumb.attr("src");this.is_16_9=i.indexOf("/thumbs169")!==-1,this.idx=0,this.mozaique=this.thumb.next(".hovered"),0===this.mozaique.length&&(i=i.substring(0,i.lastIndexOf("/")),this.mozaique=$('<img class="hovered" src="'+i+'/mozaiquehome.jpg" />').hide().insertAfter(this.thumb).on("mouseout",function(t){e.rotator.stop(t)})),this.timer=window.setTimeout(function(){e.nextVideo()},30)},startProfilePic:function(e,i){this.thumb=e,this.ori_src=this.thumb.attr("src"),this.is_profile_pic=this.thumb.hasClass("profile-pic"),this.is_video_pic=this.thumb.hasClass("video-pic"),this.idx=-1,this.videos=i,t.preloadPicture(i[0].img);var n=this;this.timer=window.setTimeout(function(){n.nextProfPic()},30)},nextVideo:function(){if(this.thumb){var t=this;this.idx=i(this.idx),0===this.idx?this.mozaique.hide():1===this.idx?this.mozaique.show().css({marginTop:"0%",marginLeft:"0%"}):(this.mozaique.css({marginTop:s(this.idx,this.is_16_9),marginLeft:Math.floor((this.idx-1)%3)*-100+"%"}),"undefined"==typeof e&&4===this.idx&&(e=Math.abs(this.thumb.height()-Math.abs(parseInt(this.mozaique.css("marginTop").replace("px",""))))>5,e&&this.mozaique.css({marginTop:s(this.idx,this.is_16_9)}))),this.timer=window.setTimeout(function(){t.nextVideo()},1e3)}},nextProfPic:function(){if(this.thumb){var e=this;this.idx=n(this.idx,this.videos.length,this.is_video_pic),this.is_video_pic&&(this.idx===-1?this.thumb.addClass("video-pic"):this.thumb.removeClass("video-pic")),this.thumb.attr("src",this.idx===-1?this.ori_src:this.videos[this.idx].img),this.is_profile_pic&&(this.idx===-1?this.thumb.addClass("profile-pic"):this.thumb.removeClass("profile-pic"));var i=n(this.idx,this.videos.length,this.is_video_pic);i!==-1&&t.preloadPicture(this.videos[i].img),this.timer=window.setTimeout(function(){e.nextProfPic()},1e3)}},stop:function(){this.timer&&(window.clearTimeout(this.timer),this.timer=null),this.thumb&&(this.mozaique&&this.mozaique.hide(),this.thumb=null,this.ori_src="",this.mozaique=null,this.videos=null)},isStillOnThumb:function(t){return this.thumb&&this.thumb.is(t)&&1===this.idx||this.mozaique&&this.mozaique.is(t)&&0===this.idx}},o}),define("lib/helpers/thumbs/mp4vp",["static/utils"],function(t){var e=function(t){return t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."))},i=function(t,e,i){return i?t.replace(".jpg",".mp4"):t.substring(0,t.lastIndexOf("/")).replace(/\/thumbs(169)?(xnxx)?l*\//,"/videopreview/")+(e?"_169.mp4":"_43.mp4")},n=function(t){var e=0;for(var i in t)e+=t[i];return e/t.length},s=function(t,e){return t++,t>=e?0:t},o=function(t){this.rotator=t,this.name=t.ENGINE_MP4,this.is_video_engine=!0,this.thumb,this.is_ad,this.is_16_9,this.idx,this.is_looping,this.node,this.pgsnode,this.pgsbar,this.nbplay=0,this.pgs_req,this.req_loaded={},this.req_start=0,this.req_total=0,this.req_dur=[],this.req_duration=[]};return o.prototype={startVideoPic:function(t){this.is_looping=!0,this.startPreview(t)},startProfilePic:function(t,e){this.is_looping=e.length+(t.hasClass("video-pic")?1:0)<2,this.videos=e,this.thumb=t,this.startPreview(t)},startPreview:function(t){this.nbplay=1;var e,n=this;if(this.thumb=t,t.hasClass("profile-pic")?(e=this.videos[0].img,this.thumb.prop("src",e).removeClass("profile-pic")):e=this.thumb.attr("src"),this.is_ad=this.thumb.data("isad")===!0,this.is_16_9=e.indexOf("/thumbs169")!==-1,this.idx=1,this.node=this.thumb.next(".videopv"),0===this.node.length){var s=this.thumb.parent().prop("href"),o="";this.is_ad&&(o=' target="_blank" rel="noopener"'),this.node=$('<div class="videopv"><a href="'+s+'"'+o+'></a><div class="progress"><div class="bar"></div></div></div>').insertAfter(this.thumb).on("mouseout",function(t){n.rotator.stop(t)})}else this.node.show();this.pgsnode=this.node.children(".progress").show(),this.pgsbar=this.pgsnode.children(".bar"),e=i(e,this.is_16_9,this.is_ad),this.startPgsCheck(e);var a=this.createVideo(e);this.node.prepend(a)},nextPreview:function(){if(this.nbplay===this.rotator.max_nb_play)return void this.rotator.stop(!0,!0);this.nbplay++,this.idx=s(this.idx,this.videos.length);var t=i(this.videos[this.idx].img,this.is_16_9,this.is_ad);this.pgsnode.show(),this.startPgsCheck(t);var e=this.node.css("backgroundColor","").children("video"),n=this.createVideo(t,function(){e.remove(),e[0].src="",e[0].load()});e.after(n)},stop:function(){if(this.thumb){this.nbplay=0,this.stopPgsCheck(),this.node.css("backgroundColor","").hide();var t=this.node.children("video");t.remove(),t[0].src="",t[0].load(),this.thumb=null,this.node=null,this.pgsnode=null,this.pgsbar=null,this.videos=null}},isStillOnThumb:function(t){return this.thumb&&this.thumb.is(t)&&1===this.idx},stopPgsCheck:function(){this.pgs_req&&(this.pgs_req.abort(),this.pgs_req=null,this.req_start=0,this.req_total=0)},startPgsCheck:function(i){var s=e(i);if("object"!=typeof this.req_loaded[s]&&(this.stopPgsCheck(),this.pgsbar.stop(!0).css("width","0%"),"boolean"!=typeof this.req_loaded[s])){var o=this;this.pgsbar.animate({width:"100%"},1e4,"linear"),this.req_start=(new Date).getTime(),this.req_total=0,this.pgs_req=t.createRequestObject(),this.pgs_req.open("GET",i),this.pgs_req.addEventListener("loadstart",function(t){o.req_start=(new Date).getTime()}),this.pgs_req.addEventListener("progress",function(t){if(t.lengthComputable&&(0===o.req_total&&o.req_dur.length>2&&o.pgsbar.stop(!0).animate({width:"100%"},Math.round(n(o.req_dur)*t.total),"linear"),o.req_total=t.total),!(o.req_dur.length>2)){if(t.lengthComputable){var e=Math.min(1,t.loaded/t.total*5/1),i=(new Date).getTime()-o.req_start;return e<1?void o.pgsbar.stop(!0).animate({width:"100%"},Math.round(i/e-i),"linear"):void o.pgsbar.stop(!0).animate({width:"100%"},1e3,"linear")}o.pgsbar.stop(!0).animate({width:"100%"},1e4,"linear")}}),this.pgs_req.addEventListener("load",function(){o.req_loaded[s]=!0}),this.pgs_req.addEventListener("abort",function(){o.req_loaded[s]!==!0&&delete o.req_loaded[s]}),this.pgs_req.send(),this.req_loaded[s]=this.pgs_req}},createVideo:function(t,o){var a=this,r=e(t),l=!1,h=document.createElement("video");h.src=t,h.muted=!0,h.autoplay="autoplay",h.disableRemotePlayback=!0,h.addEventListener("progress",function(){4===h.readyState&&h.seekable.end(0)==h.buffered.end(0)&&(a.req_loaded[r]=!0)}),h.addEventListener("timeupdate",function(){if(!l){var t=2;if(a.req_duration.length>1&&(t=n(a.req_duration)/1e3-.5),!a.is_looping&&h.duration-h.currentTime<=t){l=!0;var o=s(a.idx,a.videos.length),r=a.videos[o].img,c=e(r);"undefined"==typeof a.req_loaded[c]&&a.startPgsCheck(i(r,a.is_16_9,a.is_ad))}}}),this.is_looping?h.addEventListener("ended",function(){return a.nbplay===a.rotator.max_nb_play?void a.rotator.stop(!0,!0):(a.nbplay++,void this.play())}):h.addEventListener("ended",function(){a.req_loaded[r]=!0,a.nextPreview()});var c=!1,d=function(){if(!c){if(c=!0,h.removeEventListener("playing",d),a.req_total>0){var t=(new Date).getTime()-a.req_start;a.req_dur.push(t/a.req_total),a.req_duration.push(t),a.req_dur.length>4&&(a.req_dur.shift(),a.req_duration.shift())}a.stopPgsCheck(),a.node.css("backgroundColor","#000"),a.pgsnode.hide(),"function"==typeof o&&o()}};return h.addEventListener("playing",d),h}},o}),define("lib/helpers/thumbs/tsvp",[],function(){var t=function(t){var e=0;for(var i in t)e+=t[i];return e/t.length},e=function(t,e){return t.substring(0,t.lastIndexOf("/")).replace(/\/thumbs(169)?(xnxx)?l*\//,"/videopreview/")+(e?"_169.ts":"_43.ts")},i=function(t,e){return t++,t>=e?0:t},n=function(t,e,i){i.stop(!0).css("width","0%").animate({width:"100%"},1e4,"linear"),JSMpeg.Player.call(this,t,e);var n=(new Date).getTime(),s=!1,o=this,a=!1;this.renderer.canvas.style.visibility="hidden",this.renderer.renderProgress=function(t){if(0!==t){o.is_cached=!1,i.stop(!0),s&&(s=!1,i.css("width",(100*t).toFixed(2)+"%"));var e=(new Date).getTime()-n;i.animate({width:"100%"},Math.max(200,Math.round(e/t-e)),"linear")}},this.renderer.render=function(t,e,n){this.enabled&&(a?"function"==typeof o.nextframe&&o.nextframe(o.video.getCurrentTime(),o.video.timestamps[o.video.timestamps.length-1].time):(a=!0,this.canvas.style.visibility="",i.stop(!0),"function"==typeof o.started&&o.started()),Object.getPrototypeOf(this).render.call(this,t,e,n),o.video.timestampIndex>0&&o.video.timestampIndex===o.video.timestamps.length-1&&"function"==typeof o.ended&&o.ended())},this.resetProgress=function(){s=!0}};n.prototype=Object.create(JSMpeg.Player.prototype,{}),n.prototype.is_cached=!0,n.prototype.started=null,n.prototype.nextframe=null,n.prototype.ended=null,n.prototype.constructor=n;var s=function(t){this.rotator=t,this.name=t.ENGINE_TS,this.is_video_engine=!0,this.thumb,this.is_16_9,this.idx,this.is_looping,this.node,this.pgsnode,this.pgsbar,this.player,this.nextplayer,this.nbplay=0,this.req_duration=[]};return s.prototype={startVideoPic:function(t){this.is_looping=!0,this.startPreview(t)},startProfilePic:function(t,e){this.is_looping=e.length+(t.hasClass("video-pic")?1:0)<2,this.videos=e,this.thumb=t,this.startPreview(t)},startPreview:function(t){this.nbplay=1;var e,i=this;if(this.thumb=t,t.hasClass("profile-pic")?(e=this.videos[0].img,this.thumb.removeClass("profile-pic")):e=this.thumb.attr("src"),this.is_16_9=e.indexOf("/thumbs169")!==-1,this.idx=1,this.node=this.thumb.next(".videopv"),0===this.node.length){var n=this.thumb.parent().prop("href");this.node=$('<div class="videopv"><a href="'+n+'"></a><div class="progress"><div class="bar"></div></div></div>').insertAfter(this.thumb).on("mouseout",function(t){i.rotator.stop(t)})}else this.node.show();this.pgsnode=this.node.children(".progress").show(),this.pgsbar=this.pgsnode.children(".bar"),this.player=this.createPlayer(e),this.node.prepend(this.player.options.canvas)},nextPreview:function(){if(this.nbplay===this.rotator.max_nb_play)return void this.rotator.stop(!0,!0);this.nbplay++,this.idx=i(this.idx,this.videos.length);var t=this.videos[this.idx].img;this.pgsnode.show();var e=this.player;this.player=this.createPlayer(t),$(e.options.canvas).after(this.player.options.canvas)},stop:function(){this.thumb&&(this.node.css("backgroundColor","").hide(),this.player&&(this.player.destroy(),this.player.options.canvas.parentNode&&this.player.options.canvas.parentNode.removeChild(this.player.options.canvas),this.player=null),this.nextplayer&&(this.nextplayer.destroy(),this.nextplayer.options.canvas.parentNode&&this.nextplayer.options.canvas.parentNode.removeChild(this.nextplayer.options.canvas),this.nextplayer=null),this.thumb=null,this.node=null,this.pgsnode=null,this.pgsbar=null,this.videos=null,this.nbplay=0)},isStillOnThumb:function(t){return this.thumb&&this.thumb.is(t)&&1===this.idx},createPlayer:function(s,o){if(s=e(s,this.is_16_9),!o&&this.nextplayer){if(this.nextplayer.source.url===s){this.nextplayer.resetProgress(),this.nextplayer.play();var a=this.nextplayer;return this.nextplayer=null,a}this.nextplayer.destroy(),this.nextplayer.options.canvas.parentNode&&this.nextplayer.options.canvas.parentNode.removeChild(this.nextplayer.options.canvas),this.nextplayer=null}var r=this,a=new n(s,{canvas:document.createElement("canvas"),progressive:!1,loop:this.is_looping,autoplay:"undefined"==typeof o||!o,decodeFirstFrame:!1},this.pgsbar);if(this.is_looping)a.started=function(){r.node.css("backgroundColor","#000"),r.pgsnode.hide()},a.ended=function(){return r.nbplay===r.rotator.max_nb_play?void r.rotator.stop(!0,!0):void r.nbplay++};else{var l=this.player,h=(new Date).getTime();a.started=function(){if(r.node.css("backgroundColor","#000"),r.pgsnode.hide(),l&&(l.destroy(),l.options.canvas.parentNode.removeChild(l.options.canvas)),!a.is_cached){var t=(new Date).getTime()-h;r.req_duration.push(t),r.req_duration.length>4&&r.req_duration.shift()}},a.nextframe=function(e,n){if(!r.nextplayer){var s=2;if(r.req_duration.length>1&&(s=t(r.req_duration)/1e3-.5),n-e<=s){var o=i(r.idx,r.videos.length),a=r.videos[o].img;r.nextplayer=r.createPlayer(a,!0)}}},a.ended=function(){r.nextPreview()}}return a}},s}),define("lib/helpers/thumbs/stream",["static/utils"],function(t){var e=function(t){return t.substring(t.lastIndexOf("/")+1,t.lastIndexOf("."))},i=function(t){var e=0;for(var i in t)e+=t[i];return e/t.length},n=function(t){this.rotator=t,this.name=t.ENGINE_STREAM,this.is_video_engine=!0,this.thumb,this.node,this.pgsnode,this.pgsbar,this.pgs_req,this.req_loaded={},this.req_start=0,this.req_total=0,this.req_dur=[],this.req_duration=[]};return n.prototype={startVideoPic:function(t){var e=this;if(this.thumb=t,this.node=this.thumb.next(".videopv"),0===this.node.length){var i=this.thumb.parent().prop("href");this.node=$('<div class="videopv"><a href="'+i+'"></a><div class="progress"><div class="bar"></div></div></div>').insertAfter(this.thumb).on("mouseout",function(t){e.rotator.stop(t)})}else this.node.show();this.pgsnode=this.node.children(".progress").show(),this.pgsbar=this.pgsnode.children(".bar");var n=this.thumb.data("src");this.startPgsCheck(n);var s=this.createVideo(n);this.node.prepend(s)},stop:function(){if(this.thumb){this.stopPgsCheck(),this.node.css("backgroundColor","").hide();var t=this.node.children("video");t.remove(),t[0].src="",t[0].load(),this.thumb=null,this.node=null,this.pgsnode=null,this.pgsbar=null,this.videos=null}},isStillOnThumb:function(t){return this.thumb&&this.thumb.is(t)},stopPgsCheck:function(){this.pgs_req&&(this.pgs_req.abort(),this.pgs_req=null,this.req_start=0,this.req_total=0)},startPgsCheck:function(n){var s=e(n);if("object"!=typeof this.req_loaded[s]&&(this.stopPgsCheck(),this.pgsbar.stop(!0).css("width","0%"),"boolean"!=typeof this.req_loaded[s])){var o=this;this.pgsbar.animate({width:"100%"},1e4,"linear"),this.req_start=(new Date).getTime(),this.req_total=0,this.pgs_req=t.createRequestObject(),this.pgs_req.open("GET",n),this.pgs_req.addEventListener("loadstart",function(t){o.req_start=(new Date).getTime()}),this.pgs_req.addEventListener("progress",function(t){if(t.lengthComputable&&(0===o.req_total&&o.req_dur.length>2&&o.pgsbar.stop(!0).animate({width:"100%"},Math.round(i(o.req_dur)*t.total),"linear"),o.req_total=t.total),!(o.req_dur.length>2)){if(t.lengthComputable){var e=Math.min(1,t.loaded/t.total*5/1),n=(new Date).getTime()-o.req_start;return e<1?void o.pgsbar.stop(!0).animate({width:"100%"},Math.round(n/e-n),"linear"):void o.pgsbar.stop(!0).animate({width:"100%"},1e3,"linear")}o.pgsbar.stop(!0).animate({width:"100%"},1e4,"linear")}}),this.pgs_req.addEventListener("load",function(){o.req_loaded[s]=!0}),this.pgs_req.addEventListener("abort",function(){o.req_loaded[s]!==!0&&delete o.req_loaded[s]}),this.pgs_req.send(),this.req_loaded[s]=this.pgs_req}},createVideo:function(t,i){var n=this,s=e(t),o=document.createElement("video"),a=!1,r=function(){if(!a){if(a=!0,o.removeEventListener("playing",r),n.req_total>0){var t=(new Date).getTime()-n.req_start;n.req_dur.push(t/n.req_total),n.req_duration.push(t),n.req_dur.length>4&&(n.req_dur.shift(),n.req_duration.shift())}n.stopPgsCheck(),n.node.css("backgroundColor","#000"),n.pgsnode.hide(),"function"==typeof i&&i()}};o.addEventListener("playing",r);var l=new Hls;return l.loadSource(t),l.attachMedia(o),l.on(Hls.Events.MANIFEST_PARSED,function(){n.req_loaded[s]=!0,o.muted="muted",o.play()}),o}},n}),define("lib/helpers/thumbs/rotator",["config/main","static/utils","lib/helpers/events","jquery-mobile-events"],function(t,e,i){var n=function(){if(this.videopv_allowed=!1,this.videopv_enabled=!1,this.videopv_codec,"object"==typeof t.dyn&&"object"==typeof t.dyn.vp&&t.dyn.vp.allowed&&"string"==typeof t.dyn.vp.codec)if("mp4"===t.dyn.vp.codec||"ts"===t.dyn.vp.codec){if(this.videopv_allowed=!0,this.videopv_codec=t.dyn.vp.codec,this.videopv_enabled=!t.dyn.vp.disabled,"mp4"===this.videopv_codec){var e=document.createElement("video"),i="undefined"!=typeof e.canPlayType&&e.canPlayType('video/mp4; codecs="avc1.4D401E, mp4a.40.2"').length>0;i||(this.videopv_codec="ts")}}else"stream"===t.dyn.vp.codec&&(this.videopv_allowed=!0,this.videopv_codec="stream",this.videopv_enabled=!0);this.thumbs=$(),this.thumb,this.ori_src,this.is_video_thumb,this.is_profile_pic,this.is_video_pic,this.trigger_event,this.start_timer,this.last_start,this.touch_timer,this.max_nb_play=4,this.tmp_locked=!1,this.libtimer,this.initEngine()};return n.prototype={ENGINE_MOZAIQUE:"mozaique",ENGINE_MP4:"mp4vp",ENGINE_TS:"tsvp",ENGINE_STREAM:"stream",addThumb:function(t){if(this.thumbs.index(t)===-1){var e=this;this.thumbs=this.thumbs.add($(t).on("swipe touchstart mouseenter",function(t){if("touchstart"!=t.type)e.start(this,t.type);else if(!e.touch_timer){var i=this;e.touch_timer=setTimeout(function(){e.touch_timer=null,e.start(i,"touchstart")},200)}}).on("mouseleave",function(t){e.stop(t)}).on("mousedown",function(t){e.lock(t)}))}},initEngine:function(){var i=this.ENGINE_MOZAIQUE;if(this.videopv_enabled)if("mp4"===this.videopv_codec)i=this.ENGINE_MP4;else if("ts"===this.videopv_codec){if("object"==typeof JSMpeg)i=this.ENGINE_TS,this.libtimer&&(window.clearInterval(this.libtimer),this.libtimer=null);else if(!this.libtimer){e.loadScript(t.domains["static"]+"/v3/js/libs/jsmpeg.min.js");var n=this;this.libtimer=window.setInterval(function(){n.initEngine()},500)}}else if("stream"===this.videopv_codec)if("function"==typeof Hls)i=this.ENGINE_STREAM,this.libtimer&&(window.clearInterval(this.libtimer),this.libtimer=null);else if(!this.libtimer){e.loadScript(t.domains["static"]+"/v3/js/libs/hls.min.js");var n=this;this.libtimer=window.setInterval(function(){n.initEngine()},500)}if(!this.engine||this.engine.name!==i){var n=this,s=function(t){var e=!1,i=n.thumb;n.engine&&n.thumb&&(n.stop(!0),e=!0),n.engine=new t(n),e&&n.start(i,n.trigger_event)};i===this.ENGINE_MOZAIQUE?require(["lib/helpers/thumbs/mozaique"],s):i===this.ENGINE_MP4?require(["lib/helpers/thumbs/mp4vp"],s):i===this.ENGINE_TS?require(["lib/helpers/thumbs/tsvp"],s):i===this.ENGINE_STREAM&&require(["lib/helpers/thumbs/stream"],s)}},toggleVP:function(){this.videopv_allowed&&(this.videopv_enabled=!this.videopv_enabled,this.initEngine())},start:function(t,e){if(i.isScrolling())return!1;if($(t).hasClass("thumb-ad")&&this.engine!==this.ENGINE_MP4)return!1;if("mouseenter"===e&&this.tmp_locked){if(!((new Date).getTime()-this.tmp_locked>200))return;this.tmp_locked=!1}if(this.start_timer&&(window.clearTimeout(this.start_timer),this.start_timer=null),!this.thumb||!this.thumb.is(t)){var n=(new Date).getTime();if(this.last_start>0&&n-this.last_start<300||!this.engine){this.last_start=n;var s=this;return void(this.start_timer=window.setTimeout(function(){s.start(t,e)},300))}this.last_start=n,this.trigger_event=e,this.stop(!0),this.thumb=$(t);var o=this.thumb.data("videos");if(this.is_video_thumb="object"!=typeof o,this.is_profile_pic=!1,this.is_video_pic=!1,this.is_video_thumb)this.engine.startVideoPic(this.thumb);else{if(this.ori_src=this.thumb.attr("src"),this.ori_src.indexOf("/profthumb/")>0&&(!o||0===o.length))return this.thumb.off("swipe touchstart mouseenter mouseleave mousedown"),void(this.thumb=null);if(this.is_profile_pic=this.thumb.hasClass("profile-pic"),this.is_video_pic=this.thumb.hasClass("video-pic"),(!o||0===o.length)&&(!this.engine.is_video_engine||this.is_profile_pic))return;this.engine.startProfilePic(this.thumb,o)}}},stop:function(t,e){if(this.engine){if(t!==!0){if("swipe"===this.trigger_event)return;if(this.engine.isStillOnThumb(t.target))return}e&&(this.tmp_locked=(new Date).getTime()),this.engine.stop(),this.thumb&&(this.is_video_pic&&this.thumb.addClass("video-pic"),
this.is_video_thumb||this.thumb.attr("src",this.ori_src),this.is_profile_pic&&this.thumb.addClass("profile-pic"),this.thumb=null)}},lock:function(t){1!==t.which||t.metaKey||t.ctrlKey||t.altKey||t.shiftKey||(this.thumbs.off("swipe touchstart mouseenter mouseleave"),this.stop(!0))}},n}),define("lib/helpers/thumbs_rotator",["./thumbs/rotator","./events"],function(t,e){var i,n,s,o=new t,a=0,r=1e3,l=function(){o.addThumb(this)},h=function(t,e){e?$(".thumb img",t).not(".no-rotate").each(l):$(".thumb-block",t).not(".no-rotate").find(".thumb img").each(l)};h.video_preview=o.videopv_enabled,h.toggle_vp=function(){o.toggleVP(),h.video_preview=o.videopv_enabled},h(),e.addListener(e.TAB_HIDDEN,function(){o.stop(!0)});var c=function(){if(i=null,a=(new Date).getTime(),o.thumb){var t=o.thumb.offset();if(n<t.left||s<t.top)return void o.stop(!0);var e=o.thumb.outerWidth(!0),r=o.thumb.outerHeight(!0);return n>t.left+e||s>t.top+r?void o.stop(!0):void 0}};return $(window).on("mousemove",function(t){if(n=t.pageX,s=t.pageY,!i){var e=(new Date).getTime()-a;return e<r-50?void(i=window.setTimeout(c,r-e)):void c()}}),h}),define("text!lib/helpers/overlay/template.html",[],function(){return'<div class="x-overlay">\n\t<div class="x-body">\n\t\t<div class="x-content"></div>\n\t\t<div class="x-close{{^closable}} hidden{{/closable}}" title="{{{ close_title }}}">{{{ icon }}}</div>\n\t</div>\n</div>'}),define("lib/i18n",[],function(){return{version:"1.0.0",load:function(t,e,i,n){n.isBuild?i():xv.i18n.getCatalog(t,function(t){i(t)})}}}),define("lib/helpers/overlay",["mustache","text!./overlay/template.html","lib/i18n!front"],function(t,e,i){var n=function(n,s,o){this.open=!1,this.closable=!!s,this.esc_close=!1,this.esc_close_handler=null,this.click_close_handler=null,this.setCloseAction(o);var a="&times;";xv&&xv.conf&&xv.conf.sitename&&"default"==xv.conf.sitename&&(a='<span class="icon-f icf-close-thin"></span>'),this.parent=$(n).css("position","relative"),this.node=$(t.render(e,{closable:s,close_title:i.__("misc.close"),icon:a})),this.body=this.node.children(".x-body");var r=this;this.close_node=this.body.children(".x-close").on("click",function(){"close"===r.close_action?r.close():r.hide()}),this.container=this.body.children(".x-content")};return n.get=function(t,e,i){return new n(t,e,i)},n.prototype={onShow:null,onHide:null,onClose:null,getNode:function(){return this.node},addClass:function(t){return this.node.addClass(t),this},setClosable:function(t,e){if(this.closable=!!t,this.esc_close=t&&e,this.closable?this.close_node.removeClass("hidden"):this.close_node.addClass("hidden"),this.esc_close){if(!this.esc_close_handler){var i=this;this.esc_close_handler=$("body").on("keyup",function(t){i.open&&27===t.which&&("close"===i.close_action?i.close():i.hide())}),this.click_close_handler=$("body").on("click",function(t){i.open&&0===$(t.target).closest(i.container).length&&("close"===i.close_action?i.close():i.hide())})}}else this.esc_close_handler&&($("body").off("keyup",this.esc_close_handler),this.esc_close_handler=null,$("body").off("click",this.click_close_handler),this.click_close_handler=null);return this},setCloseAction:function(t){this.close_action="hide"===t?"hide":"close"},setText:function(t){return this.container.text(t),this},setContent:function(t){return this.container.html(t),this},empty:function(){return this.container.empty(),this},append:function(t){return this.container.append(t),this},prepend:function(t){return this.container.prepend(t),this},show:function(){if(!this.open)return this.node.appendTo(this.parent),this.open=!0,this.onShow&&this.onShow(),this},hide:function(){if(this.open)return this.node.detach(),this.open=!1,this.onHide&&this.onHide(),this},close:function(){this.open&&(this.node.remove(),this.open=!1,this.onClose&&this.onClose())},autoclose:function(t){if(this.open){var e=this;window.setTimeout(function(){e.close()},t)}}},n}),define("lib/helpers/overlay/box",["lib/tools","../overlay"],function(t,e){var i=function(t,i,n){e.apply(this,arguments),this.ori_padding=!1,this.node.addClass("x-overlay-box")};return i.prototype=new e,i.get=function(t,e,n){return new i(t,e,n)},i.prototype.show=function(e){if(!this.open){if(this.node.appendTo(this.parent),this.open=!0,e===!1)return this.body.css("margin-top","10px"),this;var i=this.node.height(),n=this.body.outerHeight();if(i<n+10&&(this.ori_padding=this.parent.css("padding-bottom"),this.parent.css("padding-bottom",n+10-i+"px")),"auto"===e){var s=0;return i>=n+10&&(s=$("body,html").scrollTop()),this.body.css("margin-top",s+10+"px"),this}if(e="undefined"!=typeof e&&$(e),e&&e.length>0){var o=e.position().top,a=Math.max(10,Math.min(o,i-n-10));this.body.css("margin-top",a+"px")}else this.body.css("margin-top",Math.max(10,Math.round(Math.min(Math.min(.01*$(window).height(),150),(i-n)/2)))+"px"),this.closable&&t.scrollTo(this.node,10);return this}},i.prototype.setOverlayClosable=function(t){if(t===!1)this.overlay_close_handler&&(this.node.off("click",this.overlay_close_handler),this.overlay_close_handler=null);else{var e=this;this.overlay_close_handler=function(t){$(t.target).hasClass("x-overlay-box")&&("close"===e.close_action?e.close():e.hide())},this.node.on("click",this.overlay_close_handler)}},i.prototype.hide=function(){return this.ori_padding!==!1&&this.parent.css("padding-bottom",this.ori_padding),e.prototype.hide.apply(this)},i.prototype.close=function(){return this.ori_padding!==!1&&this.parent.css("padding-bottom",this.ori_padding),e.prototype.close.apply(this)},i}),define("skins/common/listing/settings",["config/main","static/cookies","lib/helpers/popup","lib/helpers/thumbs_rotator","lib/helpers/overlay/box","lib/i18n!front"],function(t,e,i,n,s,o){var a=$("#listing-settings");if(0!==a.length){var r,l=[],h=window.xv.thumbs.lg_1_more_col||!1;for(var c in t.dyn.ls.buttons){var d=t.dyn.ls.buttons[c];l.push(d)}var p=function(){var t=$("<ul>");for(var e in l)switch(l[e].name){case"nb_vids_per_row":t.append(g("xs")),t.append(g("sm")),t.append(g("lg"));break;case"video_preview":t.append(m())}return t},u={xs:{icf:"device-mobile","class":"mobile-only-show-list-item",nbs:window.xv.thumbs.nb_by_cols.xs.nbs||[1],"default":parseInt(window.xv.thumbs.nb_by_cols.xs["default"])||1,setted:window.xv.thumbs.nb_by_cols.xs.setted||!1},sm:{icf:"device-tablet","class":"mobile-show-list-item mobile-only-hide",nbs:window.xv.thumbs.nb_by_cols.sm.nbs||[3],"default":parseInt(window.xv.thumbs.nb_by_cols.sm["default"])||3,setted:window.xv.thumbs.nb_by_cols.sm.setted||!1},lg:{icf:"device-desktop","class":"mobile-hide",nbs:window.xv.thumbs.nb_by_cols.lg.nbs||[4],"default":parseInt(window.xv.thumbs.nb_by_cols.lg["default"])||4,setted:window.xv.thumbs.nb_by_cols.lg.setted||!1}},f=function(t,e){var i,n=u[t].nbs,s="nb-thumbs-cols-",o=!1;if($("html").hasClass(s+t+"-smallest"))return e?"smallest":(i=n["lg"===t&&h?0:1],$("html").removeClass(s+t+"-smallest").addClass(s+t+"-"+i),i);for(var a in n)if($("html").hasClass(s+t+"-"+n[a])){if(o=n[a],e)return o;$("html").removeClass(s+t+"-"+o)}return!o&&(o=u[t]["default"],e)?o:(o=parseInt(o),i="lg"===t&&h?n.indexOf(o+2)!==-1&&n.indexOf(o+1)!==-1?o+1:"smallest":n.indexOf(o+1)!==-1?o+1:n[0],$("html").addClass(s+t+"-"+i),i)},g=function(t){var i=function(e,i){var n=u[t].nbs;if("smallest"===i){var s=9999;for(var a in n)n[a]<s&&(s=n[a]);i=s}else if("lg"===t&&h){i=parseInt(i);var r=!0;for(var a in n)n[a]>i&&(r=!1);r||i++}return'<span class="icon-f icf-'+e+'"></span> '+(1===i?o.__("listing.one_column"):o.__("listing.nb_columns",{"%nb%":i.toString()}))},n=u[t].icf,s=$('<a href="#">'+i(n,f(t,!0))+"</a>");return s.on("click",function(o){o.preventDefault();var a=f(t);if(s.html(i(n,a)),e.setLocal("hexavid_nb_thumbs_cols_"+t,"smallest"===a?-1:a,7776e7,"/"),r.position(),r.open(),document.body)if(document.createEventObject){var l=document.createEventObject();document.body.fireEvent("settings_nb_thumbs_changed",l)}else{var l=document.createEvent("HTMLEvents");l.initEvent("settings_nb_thumbs_changed",!0,!0),document.body.dispatchEvent(l)}}),$('<li class="round-icons '+u[t]["class"]+'"></li>').append(s)},m=function(){var t=function(t){return'<span class="icon video-preview-'+(t?"on":"off")+'"></span> '+(t?o.__("listing.disable_pv"):o.__("listing.enable_pv")).replace("%strong%","<strong>").replace("%end_strong%","</strong>")},i=$("<li></li>"),s=$('<a href="#">'+t(n.video_preview)+"</a>").appendTo(i);return s.on("click",function(i){i.preventDefault(),n.toggle_vp(),s.html(t(n.video_preview)),e.setLocal("hexavid_no_videopv",n.video_preview?"0":"1",7776e7,"/"),r.position()}),i},v="default"===t.sitename&&"video"===t.data.action?{v:"above",h:"right"}:{v:"below",h:"right"};r=new i(a.children("button,a,.btn"),p,{trigger:"click mouseclick",popup_class:"listing-settings-popup",position:v,autoclose:5e3})}}),require.config({waitSeconds:90,paths:{jquery:"jquery",text:"text"},shim:{json3:{exports:"JSON"}},config:{text:{useXhr:function(t,e,i,n){if("/"===t.substr(0,1))return!0;if(t.match(/^https?:\/\/static[\w-]*\.xvideos\.com\/.*$/))return!0;var s=e+"://"+i;return t.substr(0,s.length)===s}}}}),"object"==typeof html5player&&"function"==typeof html5player.showPlayer&&html5player.showPlayer(),define("static/console",window.xv.console),define("static/utils",window.xv.utils),define("static/cookies",window.xv.cookies),define("static/storage",window.xv.storage),define("static/thumbs",window.xv.thumbs),require(["respond"]),require(["config/main","lib/helpers/inline_loader","lib/helpers/popup/language_switcher","lib/helpers/bookmark","static/console"],function(t,e,i,n,s){s.log(window.location.href,"Load page"),e.setup(t.domains["static"]+"/v3/img/skins/xnxx/xnxx-inline-loader.gif"),t.data.action&&require(["skins/"+t.sitename+"/"+t.data.action]),n(".bookmark-link",t.domains.slave,"XNXX VIDEOS");var o=$("#language-switcher,#language-switcher-mobile");o.length>0&&o.each(function(){i($(this),"/change-language/",t.data.other_locales)}),"object"==typeof t.dyn.ls&&"object"==typeof t.dyn.ls.buttons&&t.dyn.ls.buttons.length>0&&require(["skins/common/listing/settings"])}),define("skins/xnxx",function(){}),define("lib/converter",[],function(){var t={},e={in2cm:2.54,lbs2kg:.45359237},i={"in":"cm",cm:"in",lbs:"kg",kg:"lbs"};return t.map=function(t){return i[t]},t.convert=function(t,n,s,o){"undefined"!=typeof s&&s||(s=i[n]);var a,r=n+"2"+s;if("undefined"==typeof e[r]){if(r=s+"2"+n,"undefined"==typeof e[r])return!1;a=1/e[r]}else a=e[r];var l=t*a;if("undefined"!=typeof o){if(0===o)return Math.round(l);var h=Math.pow(10,o);l=Math.round(l*h)/h}return l},t.trimPx=function(t){return Math.round(parseFloat(t.replace(/[^\d\.-]/g,"")))},t}),function(t){"function"==typeof define&&define.amd?define("jquery-scrollLock",["jquery"],t):t(jQuery)}(function(t){"use strict";var e,i={space:32,pageup:33,pagedown:34,end:35,home:36,up:38,down:40},n=function(e,i){var n,s,o,a=i.scrollTop(),r=i.prop("scrollHeight"),l=i.prop("clientHeight"),h=e.originalEvent.wheelDelta||-1*e.originalEvent.detail||-1*e.originalEvent.deltaY,c=0;return"wheel"===e.type?(n=i.height()/t(window).height(),c=e.originalEvent.deltaY*n):this.options.touch&&"touchmove"===e.type&&(h=e.originalEvent.changedTouches[0].clientY-this.startClientY),o=(s=h>0&&a+c<=0)||h<0&&a+c>=r-l,{prevent:o,top:s,scrollTop:a,deltaY:c}},s=function(t,e){var n,s,o=e.scrollTop(),a={top:!1,bottom:!1};return a.top=0===o&&(t.keyCode===i.pageup||t.keyCode===i.home||t.keyCode===i.up),a.top||(n=e.prop("scrollHeight"),s=e.prop("clientHeight"),a.bottom=n===o+s&&(t.keyCode===i.space||t.keyCode===i.pagedown||t.keyCode===i.end||t.keyCode===i.down)),a},o=function(e,i){this.$element=e,this.options=t.extend({},o.DEFAULTS,this.$element.data(),i),this.enabled=!0,this.startClientY=0,this.options.unblock&&this.$element.on(o.CORE.wheelEventName+o.NAMESPACE,this.options.unblock,t.proxy(o.CORE.unblockHandler,this)),this.$element.on(o.CORE.wheelEventName+o.NAMESPACE,this.options.selector,t.proxy(o.CORE.handler,this)),this.options.touch&&(this.$element.on("touchstart"+o.NAMESPACE,this.options.selector,t.proxy(o.CORE.touchHandler,this)),this.$element.on("touchmove"+o.NAMESPACE,this.options.selector,t.proxy(o.CORE.handler,this)),this.options.unblock&&this.$element.on("touchmove"+o.NAMESPACE,this.options.unblock,t.proxy(o.CORE.unblockHandler,this))),this.options.keyboard&&(this.$element.attr("tabindex",this.options.keyboard.tabindex||0),this.$element.on("keydown"+o.NAMESPACE,this.options.selector,t.proxy(o.CORE.keyboardHandler,this)),this.options.unblock&&this.$element.on("keydown"+o.NAMESPACE,this.options.unblock,t.proxy(o.CORE.unblockHandler,this)))};o.NAME="ScrollLock",o.VERSION="3.1.2",o.NAMESPACE=".scrollLock",o.ANIMATION_NAMESPACE=o.NAMESPACE+".effect",o.DEFAULTS={strict:!1,strictFn:function(t){return t.prop("scrollHeight")>t.prop("clientHeight")},selector:!1,animation:!1,touch:"ontouchstart"in window,keyboard:!1,unblock:!1},o.CORE={wheelEventName:"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",animationEventName:["webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend","animationend"].join(o.ANIMATION_NAMESPACE+" ")+o.ANIMATION_NAMESPACE,unblockHandler:function(t){t.__currentTarget=t.currentTarget},handler:function(e){var i,s,a;this.enabled&&!e.ctrlKey&&(i=t(e.currentTarget),(this.options.strict!==!0||this.options.strictFn(i))&&(e.stopPropagation(),s=t.proxy(n,this)(e,i),e.__currentTarget&&(s.prevent&=t.proxy(n,this)(e,t(e.__currentTarget)).prevent),s.prevent&&(e.preventDefault(),s.deltaY&&i.scrollTop(s.scrollTop+s.deltaY),a=s.top?"top":"bottom",this.options.animation&&setTimeout(o.CORE.animationHandler.bind(this,i,a),0),i.trigger(t.Event(a+o.NAMESPACE)))))},touchHandler:function(t){this.startClientY=t.originalEvent.touches[0].clientY},animationHandler:function(t,e){var i=this.options.animation[e],n=this.options.animation.top+" "+this.options.animation.bottom;t.off(o.ANIMATION_NAMESPACE).removeClass(n).addClass(i).one(o.CORE.animationEventName,function(){t.removeClass(i)})},keyboardHandler:function(e){var i,n=t(e.currentTarget),a=(n.scrollTop(),s(e,n));return e.__currentTarget&&(i=s(e,t(e.__currentTarget)),a.top&=i.top,a.bottom&=i.bottom),a.top?(n.trigger(t.Event("top"+o.NAMESPACE)),this.options.animation&&setTimeout(o.CORE.animationHandler.bind(this,n,"top"),0),!1):a.bottom?(n.trigger(t.Event("bottom"+o.NAMESPACE)),this.options.animation&&setTimeout(o.CORE.animationHandler.bind(this,n,"bottom"),0),!1):void 0}},o.prototype.toggleStrict=function(){this.options.strict=!this.options.strict},o.prototype.enable=function(){this.enabled=!0},o.prototype.disable=function(){this.enabled=!1},o.prototype.destroy=function(){this.disable(),this.$element.off(o.NAMESPACE),this.$element=null,this.options=null},e=t.fn.scrollLock,t.fn.scrollLock=function(e){return this.each(function(){var i=t(this),n="object"==typeof e&&e,s=i.data(o.NAME);(s||"destroy"!==e)&&(s||i.data(o.NAME,s=new o(i,n)),"string"==typeof e&&s[e]())})},t.fn.scrollLock.defaults=o.DEFAULTS,t.fn.scrollLock.noConflict=function(){return t.fn.scrollLock=e,this}}),define("skins/common/search/autocomplete",["config/main","mustache","lib/tools","lib/converter","lib/i18n!front","jquery-scrollLock"],function(t,e,i,n,s){var o=["KEYWORDS","PORNSTAR","CHANNEL"],a=function(t,e,i,n,s){this.relative=i,this.input=e.prop("autocomplete","off"),this.tpl=n,this.opened=!1,this.autocomplete=$("<div>").addClass("search-autocomplete").appendTo(t.css("position","relative")).hide().scrollLock({unblock:"ul"}),this.source_url=s,this.has_results=!1,this.results={},this.time_btw_searchs=200,this.timer,this.last_time=0,this.cur_search=!1,this.last_search=!1,this.cur_keywords=!1,this.searches=[],this.max_searchs=3,this.has_scroll_height="undefined"!=typeof $("body")[0].scrollHeight,this.max_height=0,this.selected=!1,this.res_selected=0,this.is_keyboard_nav=!1;var o=this;this.input.on("keydown",function(t){o.on_tab_input(t)}).on("keyup paste",function(t){o.on_char_input(t)}).on("blur",function(){setTimeout(function(){o.close()},300)}).on("focus",function(){o.search()}),$(window).on("resize",function(){o.resize()})};return a.prototype={open:function(){this.opened||(this.autocomplete.show(),this.resize(),this.opened=!0)},close:function(){this.opened&&(this.autocomplete.hide(),this.opened=!1)},resize:function(){var t=n.trimPx(this.input.css("border-left-width")),e=n.trimPx(this.input.css("padding-left")),i=n.trimPx(this.input.css("padding-left")),s=this.relative.offset(),o=this.input.offset(),a=this.input.outerHeight(),r=o.top-s.top+a+1,l=o.left-s.left,h=this.relative.outerWidth()-l,c=this.input.width()+i+e+2*t;this.lpadding={left:e+t+"px",right:i+t+"px"},this.autocomplete.css({top:r+"px",left:l+"px"}),h<=c?this.autocomplete.css("width",h+"px"):this.autocomplete.css({minWidth:Math.min(h,Math.max(c,Math.min(h,300)))+"px",maxWidth:h+"px"}),this.max_height=$(window).height()-(o.top+s.top+a+1),this.resizeResults()},resizeResults:function(){if(this.has_scroll_height&&this.has_results){if(this.max_height<768)return this.autocomplete.children(".title").hide(),this.autocomplete.children("ul").css("maxHeight","none"),void this.autocomplete.css({maxHeight:this.max_height-4+"px",overflowY:"auto"});this.autocomplete.css({maxHeight:"none",overflowY:"hidden"});var t=0,e=0,i=[];this.autocomplete.children().each(function(){var n=$(this);if(n.hasClass("title"))return n.show(),void(t+=n.outerHeight(!0));var s={e:n,h:n[0].scrollHeight};e+=s.h,i.push(s)});var n=Math.max(this.max_height-t-4,140*i.length);do{var s=i.length,o=0;for(var a in i){var r=n/s;r>=i[a].h&&(i[a].e.css("maxHeight","none"),o+=i[a].h,i.splice(a,1))}n-=o,e-=o}while(i.length<s);for(var a in i){var r=n/i.length;i[a].e.css("maxHeight",r+"px")}}},getSearch:function(){return $.trim(this.input.val()).replace(/[\s\/]+/," ")},search:function(t){if("undefined"==typeof t?(this.last_search===!1&&(this.last_search=this.getSearch()),t=this.last_search):this.last_search=t,this.cur_keywords===t)return void(this.has_results&&this.open());if(this.cur_search!==t){if("undefined"!=typeof this.results[t])return void this.display(t);if(0===t.length)return this.results[""]={KEYWORDS:[],PORNSTAR:[],CHANNEL:[]},void this.display("");if(!this.timer){var e=this,i=(new Date).getTime(),n=i-this.last_time;if(n<this.time_btw_searchs)return void(this.timer=window.setTimeout(function(){e.timer=null,e.search()},this.time_btw_searchs-n));this.searches.length===this.max_searchs&&this.searches.shift().abort(),this.last_time=i,this.searches.push($.getJSON(this.source_url+"/"+encodeURIComponent(t),function(i){"object"!=typeof i.KEYWORDS&&(i.KEYWORDS=[]),"object"!=typeof i.PORNSTAR&&(i.PORNSTAR=[]),"object"!=typeof i.CHANNEL&&(i.CHANNEL=[]);for(var n in o){var s=o[n];for(var a in i[s]){var r=i[s][a];if("KEYWORDS"!==s)"https:"===window.location.protocol&&(i[s][a].P=r.P.replace("http://","https://")),"number"==typeof r.M?(i[s][a].highlight=!0,i[s][a].t1=r.N.toString().substr(0,r.M),i[s][a].t2=r.N.toString().substr(r.M,r.L),i[s][a].t3=r.N.toString().substr(r.M+r.L)):i[s][a].highlight=!1;else{var l=r.N.toString().toLowerCase().indexOf(t.toLowerCase());l===-1?i[s][a].highlight=!1:(i[s][a].highlight=!0,i[s][a].t1=r.N.toString().substr(0,l),i[s][a].t2=r.N.toString().substr(l,t.length),i[s][a].t3=r.N.toString().substr(l+t.length))}}}for(var a in i.PORNSTAR)i.PORNSTAR[a].model=0===i.PORNSTAR[a].R||i.PORNSTAR[a].R>1e3;e.results[t]=i,e.last_search===t&&e.display(t)}).fail(function(){e.results[t]={KEYWORDS:[],PORNSTAR:[],CHANNEL:[]},e.last_search===t&&e.display(t)}).always(function(){e.cur_search===t&&(e.cur_search=!1,e.timer&&(window.clearTimeout(e.timer),e.timer=null))}))}}},display:function(t){this.cur_keywords=t;var i=this.results[t];return 0===i.KEYWORDS.length&&0===i.PORNSTAR.length&&0===i.CHANNEL.length?(this.selected=!1,this.has_results=!1,void this.close()):(this.has_results=!0,this.open(),this.selected=$(e.render(this.tpl,{results:i,has_keywords:i.KEYWORDS.length>0,has_pornstars:i.PORNSTAR.length>0,has_channels:i.CHANNEL.length>0,padding:this.lpadding,lbl_world:s.__("misc.world"),lbl_model:s.__("profile.model"),lbl_pss:s.__("profile.pornstars_models_camgirls"),lbl_chans:s.__("profile.channels"),lbl_suggestions:s.__("video.suggestions"),uri:function(){return function(t,e){return encodeURIComponent(e(t))}}})).appendTo(this.autocomplete.empty()).filter("ul").first().scrollTop(0).children("li").first().addClass("selected"),this.res_selected=0,void this.resizeResults())},on_tab_input:function(t){9===t.which&&this.has_results&&(t.preventDefault(),this.selected&&(window.location.href=this.selected.children("a").prop("href")))},on_char_input:function(t){if(38===t.which||40===t.which){if(!this.has_results)return;if(this.is_keyboard_nav=!0,38===t.which){if(0===this.res_selected)return;this.res_selected--}else{var e=this.results[this.cur_keywords];if(this.res_selected===e.KEYWORDS.length+e.PORNSTAR.length+e.CHANNEL.length-1)return;this.res_selected++}return this.selected.removeClass("selected"),this.selected=this.autocomplete.children("ul").children("li").eq(this.res_selected).addClass("selected"),void this.selected.parent().scrollTop(this.selected.parent().scrollTop()+this.selected.position().top-20)}if(13===t.which&&this.has_results&&this.is_keyboard_nav&&this.selected)return t.preventDefault(),void(window.location.href=this.selected.children("a").prop("href"));if(this.is_keyboard_nav=!1,"paste"===t.type){"object"==typeof t.originalEvent.clipboardData&&"function"==typeof t.originalEvent.clipboardData.getData&&this.search(t.originalEvent.clipboardData.getData("text"));var i=this;return void window.setTimeout(function(){i.search(i.getSearch())},50)}this.search(this.getSearch())}},function(e,i,n){if("string"==typeof t.dyn.ip&&t.dyn.ip.indexOf(".")!==-1){var s="/search-suggest";!t.dyn.pagefilter||"gay"!==t.dyn.pagefilter&&"shemale"!==t.dyn.pagefilter||(s+="/"+t.dyn.pagefilter);var o=$("header input.search-input").filter("[name='k']");if(o.is(":focus"))return void new a(e,o,i||e,n,s);t.dyn.is_desktop&&("/"===window.location.pathname||"/gay"===window.location.pathname||"/shemale"===window.location.pathname)&&document.activeElement&&"BODY"===document.activeElement.tagName&&o.is(":visible")&&o.focus(),o.on("keyup keydown focus",function(t){o.off("keyup keydown focus"),new a(e,o,i||e,n,s),o.trigger(t)})}}}),define("text!skins/xnxx/search/autocomplete.html",[],function(){return'{{#has_keywords}}\n<div class="title" style="padding-left:{{padding.left}};padding-right:{{padding.right}}">{{{lbl_suggestions}}}</div>\n<ul class="keywords">\n\t{{#results.KEYWORDS}}\n\t<li style="padding-left:{{padding.left}};padding-right:{{padding.right}}">\n\t\t<a href="/?k={{#uri}}{{{N}}}{{/uri}}&top">\n\t\t\t<span class="nbres">{{R}}</span>\n\t\t\t<span class="keywords">{{#highlight}}{{t1}}<span class="highlighted">{{t2}}</span>{{t3}}{{/highlight}}{{^highlight}}{{N}}{{/highlight}}</span>\n\t\t</a>\n\t</li>\n\t{{/results.KEYWORDS}}\n</ul>\n{{/has_keywords}}\n{{#has_pornstars}}\n<div class="title" style="padding-left:{{padding.left}};padding-right:{{padding.right}}">{{{lbl_pss}}}</div>\n<ul class="pornstars">\n\t{{#results.PORNSTAR}}\n\t<li style="padding-left:{{padding.left}};padding-right:{{padding.right}}">\n\t\t<a href="/pornstar/{{{F}}}">\n\t\t\t<span class="thumb" style="background-image:url(\'{{{P}}}\')"></span>\n\t\t\t<span class="name">{{#highlight}}{{t1}}<span class="highlighted">{{t2}}</span>{{t3}}{{/highlight}}{{^highlight}}{{N}}{{/highlight}}</span>\n\t\t\t<span class="rank"><span class="rank-type">{{#model}}M{{/model}}{{^model}}P{{/model}}</span>{{#RF}}#<span class="rank-pos">{{RF}}</span>{{/RF}}</span>\n\t\t</a>\n\t</li>\n\t{{/results.PORNSTAR}}\n</ul>\n{{/has_pornstars}}'}),define("skins/xnxx/search/autocomplete",["skins/common/search/autocomplete","text!./autocomplete.html"],function(t,e){t($("body"),null,e)}),define("text!skins/xnxx/header/countries_list.html",[],function(){return'<div>\n\t{{#title}}\n\t<div class="title">{{ title }}</div>\n\t{{/title}}\n\t<ul class="row">\n\t\t{{#countries}}\n\t\t{{#c}}<li class="country-{{ c }} col-xs-12 col-sm-4 col-md-3 col-lg-2{{#a}} current{{/a}}" data-order="{{ o }}" data-country="{{ c }}"><a{{#url_start}} href="{{ url_start }}{{ c }}"{{/url_start}} class="btn"><span class="flag-small flag-{{ c }}"></span> {{ n }}</a></li>{{/c}}\n\t\t{{/countries}}\n\t</ul>\n</div>'}),define("skins/xnxx/header/geo_switch",["config/main","mustache","static/cookies","lib/helpers/overlay","lib/helpers/popup","lib/helpers/inline_loader","text!./countries_list.html"],function(t,e,i,n,s,o,a){xv||(xv={}),xv.header||(xv.header={}),xv.header.country_change||(xv.header.country_change={}),xv.header.country_change.order_flags=function(t){if(t=$(t),0!=t.length){var e=t.find("ul").first(),i=parseInt(e.width()),n=e.children("li:not(.empty)").sort(function(t,e){var i=parseInt($(t).data("order")),n=parseInt($(e).data("order"));return i<n?-1:i>n?1:0}),s=parseInt(n.first().outerWidth()),o=n.length,a=Math.round(i/s),r=Math.ceil(o/a),l=n.first().prop("class").split(/\s+/);classEmpty="empty";for(var h in l)0===l[h].indexOf("col-")&&(classEmpty+=" "+l[h]);n.detach(),e.empty();for(var c=0;c<r;c++)for(var h=0;h<a;h++){var d=c+h*r;d<o?e.append(n[d]):e.append($('<li class="'+classEmpty+'" ></li>'))}}};var r=$("#site-nav .country-switch, .topbar .country-switch");if(0!==r.length){xv.header.country_change.position=function(){xv.header.country_change.order_flags($(".popup-trends-countries"))},xv.header.country_change.position(),$(window).on("resize",xv.header.country_change.position);var l,h,c=r.first().data("country"),d=new Array;order=0;for(var p in xv.conf.dyn.countries)cur_c=xv.conf.dyn.countries[p][0].toLowerCase(),d.push({o:order,c:cur_c,n:xv.conf.dyn.countries[p][1],a:cur_c===c.toLowerCase()}),order++;var u=$(e.render(a,{countries:d,url_start:"/change-country/"}));return u.children(".country-"+c).addClass("disabled"),r.on("click",function(t){return t.preventDefault(),t.stopPropagation(),"function"==typeof xv.header.close_mobile_menu&&xv.header.close_mobile_menu(),h?(h.show("body"),void(l&&l.close())):(h=new n("body",!0,"hide"),h.setClosable(!0,!0),h.addClass("popup-trends-countries"),h.setContent(u),h.show("body"),void("undefined"!=typeof xv.header.country_change&&"function"==typeof xv.header.country_change.position&&xv.header.country_change.position($(".popup-trends-countries"))))}).addClass("init-ok"),!1}}),define("skins/xnxx/header/mobile_cat",[],function(){$(window).resize(window.mobile_cat_list_open)}),define("skins/xnxx/header/all_pages",["skins/xnxx/search/autocomplete","skins/xnxx/header/geo_switch","skins/xnxx/header/mobile_cat"],function(){}),define("skins/xnxx/http_status",["skins/xnxx/header/all_pages"],function(){}),define("lib/helpers/suggest_tracker",["static/cookies"],function(t){var e=function(){this.active_tracking=!1,this.thumb_list=!1,this.view_list=[],this.cookie_name="pending_thumb",this.init_tracking()};e.prototype={init_tracking:function(){this.active_tracking=!0,this.thumb_list=$(document).find(".video-suggest");var e=t.get(this.cookie_name);if(e){var i=JSON.parse(e);i&&(this.view_list=i)}var n=this;setInterval(function(){n.checkViewed()},1e3),n.checkViewed()},checkViewed:function(){if(!this.thumb_list)return void console.error("Suggest : No video detected");var t=!1,e=this;this.thumb_list=jQuery.grep(this.thumb_list,function(i){if(!i.getBoundingClientRect)return console.error("Failed for ",i),!1;var n=i.getBoundingClientRect(),s=window.innerHeight||document.documentElement.clientHeight;if(n.top<0)return i.last_seen=0,!0;if(n.left<0)return i.last_seen=0,!0;if(n.top>s-n.height)return i.last_seen=0,!0;if(!i.last_seen)return i.last_seen=(new Date).getTime(),!0;if((new Date).getTime()-i.last_seen<900)return!0;i.setAttribute("data-seen","true");var o=i.id.substr(6);return o?(e.view_list.includes(o)||e.view_list.push(o),t=!0,!1):(console.error("Bad thumb id",i.id),!1)}),t&&this.saveCookie()},saveCookie:function(){console.log("Suggestion: Saving cookie with",this.view_list),t.setLocal(this.cookie_name,JSON.stringify(this.view_list),108e5,"/")}};var i=new e;return i}),define("skins/xnxx/main",["lib/helpers/thumbs_rotator","skins/xnxx/header/all_pages","lib/helpers/suggest_tracker"],function(){}),define("skins/xnxx/search/add_history_nav",["static/utils","config/main","lib/i18n!front"],function(t,e,i){return function(t){var n=t;"straight"!==e.dyn.pagefilter&&window.location.pathname.toLowerCase().indexOf("/"+e.dyn.pagefilter+"/")!==-1&&n.toLowerCase().indexOf(e.dyn.pagefilter)===-1&&n.toLowerCase().indexOf(i.__(e.dyn.pagefilter).toLowerCase())===-1&&(n=i.__(e.dyn.pagefilter)+" "+n);var s=function(t){var e=String(parseInt(t))===String(t),i=new RegExp("/\\d+/?$");return pagin_pos=i.exec(window.location.pathname),e&&pagin_pos?(i=new RegExp("/"+String(t)+"/?"),search_pos=i.exec(window.location.pathname),!search_pos||search_pos.index===pagin_pos.index||(i=new RegExp("/0/?$"),pagin_pos=i.exec(window.location.pathname),null!==pagin_pos)):!pagin_pos||(i=new RegExp("/0/?$"),pagin_pos=i.exec(window.location.pathname),null!==pagin_pos)};s(t)&&xv.cats.add_to_history(n,window.location.pathname)}}),define("skins/xnxx/mozaique",["config/main","./search/add_history_nav","lib/helpers/thumbs_rotator","skins/xnxx/header/all_pages"],function(){var t=$("#best-months");if(0!==t.length){var e=t.children("a.hidden"),i=t.children(".view-more"),n=!1;i.on("click",function(){n=!n,i.html(n?"-":"+"),e.toggleClass("hidden",!n)})}}),define("skins/xnxx/profiles",["config/main","lib/helpers/bookmark","lib/helpers/thumbs_rotator","skins/xnxx/header/all_pages"],function(t,e){e(".ps-bookmark-link",window.location.href,t.data.slogan)}),define("skins/xnxx/profiles_clicksort",["jquery","lib/tools","lib/helpers/thumbs_rotator","./profiles"],function(t,e,i){var n=t(document),s=t("#profiles-list-inf"),o=0,a=!1,r=s.children().last(),l=r.offset().top,h=function(t){s.append(e.replaceThumbcast(t.replace(/\\'/gi,"'"))),e.executePendingPrepare(s.find(".thumb-block")),i(r.nextAll(),!0),r=s.children().last(),l=r.offset().top},c=function(){a||o>=19||n.scrollTop()+2.5*t(window).height()<l||(a=!0,o++,t.get("/pornstars/"+o,h,"html").always(function(){a=!1,c()}))};t(window).on("scroll",c).on("resize",function(){l=r.offset().top,c()}),c()}),define("skins/xnxx/profiles_index",["./profiles"],function(){}),define("skins/xnxx/tag",["./search/add_history_nav","lib/helpers/thumbs_rotator","skins/xnxx/header/all_pages"],function(){var t=$("#listing-page-filters-block"),e=t.find(".filter"),i=!0,n=!1,s=!1;e.click(function(){var t=$(this).data("num");e.removeClass("opened"),t===n?n=!1:(n=t,$(this).addClass("opened"))}),t.find(".filters-opener, .close").click(function(){i=!1,s===!0?(t.removeClass("opened_menu"),s=!1):(t.addClass("opened_menu"),$("#filters-list").css("max-height",$("#content-thumbs").height()),s=!0)}),$("#filters-list").click(function(){i=!1}),$("body").on("click",function(o){i===!0&&(t.removeClass("opened_menu"),s=!1,e.removeClass("opened"),n=!1),i=!0}),$("#filters-list.no-js").removeClass("no-js");var o,a,r=$("#search-page-filters-block"),l=!1;o=r.find(".btn,.selected a").on("click",function(t){t.preventDefault(),r.toggleClass("expanded"),o.html(l?a:"Hide filters&#9650;"),l=!l}).filter(".btn"),a=o.html()}),define("skins/xnxx/search",["./search/add_history_nav","./tag"],function(t){var e=$("#xnxx-search-bar input").val();e=e.slice(0,1).toUpperCase()+e.slice(1),t(e);var i=$("#search-associates");i.find(".show-more a").on("click",function(){i.toggleClass("mobile-expanded")})}),define("skins/xnxx/tags",["lib/tools","skins/xnxx/header/all_pages"],function(t){var e,i=!1,n=$("#filter-tags-input"),s="",o=function(){i||(i=!0,e=$("#tags li").each(function(){$(this).data("tag",$.trim(t.translit($(this).find("a").text())))}))},a=function(){o();var i=$.trim(t.translit(n.val()));if(i!==s)return s=i,0===i.length?void e.removeClass("hidden"):void e.each(function(){$(this).toggleClass("hidden",$(this).data("tag").indexOf(i)===-1)})};n.on("keyup",a),n.val().length>0&&a()}),define("lib/helpers/dom",[],function(){
return window.xv.dom.isElementInView=function(t,e){var i=$(window).scrollTop(),n=i+$(window).height(),s=$(t).offset().top,o=s+$(t).height();return e===!0?i<s&&n>o:s<=n&&o>=i},window.xv.dom}),function(t){"function"==typeof define&&define.amd?define("lib/pathchange",["jquery"],t):t(jQuery)}(function(t){t.fn.pathchange=function(t){return t?this.bind("pathchange",t):this.trigger("pathchange")};var e=t.pathchange={options:{useHistory:!0,useHashchange:!0,pollingInterval:250,interceptLinks:!0,disableHashLinks:!0},init:function(i){var n;t.extend(e.options,i),e.options.useHistory&&e.detectHistorySupport()&&t(window).bind("popstate",function(e){t(window).trigger("pathchange")}),e.options.useHashchange&&(t(window).bind("hashchange",function(e){t(window).trigger("pathchange")}),e.detectHashchangeSupport()||(n=window.location.hash,setInterval(function(){n!==window.location.hash&&(t(window).trigger("hashchange"),n=window.location.hash)},e.options.pollingInterval))),e.options.interceptLinks&&t("body").delegate('a[href^="/"]',"click",function(i){e.changeTo(t(this).attr("href")),i.preventDefault()}),e.options.disableHashLinks&&t("body").delegate('a[href="#"]',"click",function(t){t.preventDefault()})},changeTo:function(i){e.options.useHistory&&e.detectHistorySupport()?(window.history.pushState(null,null,i),t(window).trigger("pathchange")):(i.indexOf("#")<0&&(i+="#"),window.location.href=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")+i)},detectHistorySupport:function(){return!(!window.history||!history.pushState)},detectHashchangeSupport:function(){var t="onhashchange"in window;return!t&&window.setAttribute&&(window.setAttribute("onhashchange","return;"),t="function"==typeof window.onhashchange),t}};return e}),define("lib/history",["./tools","./pathchange"],function(t){var e="##NOHASH##",i={},n="",s={};return s.getNoHashValue=function(){return e},s.registerHash=function(t,n){return"function"==typeof n&&(t||(t=e),i[t]=n,!0)},s.setUrlHash=function(e){n!==e&&(n=e,t.setUrlHash(e))},$.pathchange&&($.pathchange.init({interceptLinks:!1}),$(window).on("pathchange",function(){var s=t.getUrlHash();s||(s=e),s!==n&&i[s]&&i[s](s),n=s})),s}),define("lib/tab",["lib/helpers/dom","lib/tools","./history"],function(t,e,i){var n=function(n,s,o,a,r){this.node=$(n),this.closable=!!o,this.use_class="class"===r,this.no_first_tab_hash=!!a;var l=this.node.find(".tab-buttons a").not(".notab"),h=this.node.find(".tabs .tab"),c=this;if(0===h.length||l.length<h.length)return void console.error("Invalid tabs number");var d=t.getViewportWidth()<=768;s=s||{},this.first_tab_id,this.active=!1,this.tabs={},h.each(function(t){var e=l.first(),n=e.data("target");l=n?l.filter(function(t){return 0!==t&&($(this).data("target")!==n||(e=e.add(this),!1))}):l.slice(1);var o=$(this),a=o.prop("id"),r={};if(c.first_tab_id||(c.first_tab_id=a),r.first=0===t,r.id=a,r.tab=o,r.btn=e,r.target=n,r.active=!1,c.active)c.use_class?o.removeClass("active"):o.hide(),r.btn.removeClass("active");else{var h=r.btn.hasClass("active")||d&&r.btn.hasClass("mobile-active")||!d&&r.btn.hasClass("desktop-active");h?(r.active=!0,c.active=a,c.use_class?o.addClass("active"):o.show()):c.use_class?o.removeClass("active"):o.hide()}o.removeClass("mobile-active desktop-active"),r.btn.removeClass("mobile-active desktop-active"),r.action=!1;var p=[];"function"==typeof s[a]?r.action=s[a]:"object"==typeof s[a]&&("function"==typeof s[a].action&&(r.action=s[a].action),"object"==typeof s[a].subhashes&&(p=s[a].subhashes));var u="_"+a;c.no_first_tab_hash&&0===t&&(u=!1),i.registerHash(u,function(t){c._onhashchange(t)}),r.btn.on("click",function(t){t.preventDefault(),c.closable&&c.active===a?c.close():c.open(a)}),c.tabs[a]=r;for(var f in p)c.tabs[a+","+p[f]]=r,i.registerHash("_"+a+","+p[f],function(t){c._onhashchange(t)})});var p=e.getUrlHash();p&&(p=p.substr(1),"undefined"!=typeof this.tabs[p]&&(this._close(),this.active=p)),o||this.active||(this.active=this.first_tab_id),o&&!this.no_first_tab_hash&&i.registerHash(!1,function(t){c._onhashchange(t)}),this.active&&this.open(this.active,!0)};return n.prototype={open:function(t,e){if((e||this.active!==t)&&"undefined"!=typeof this.tabs[t]){e&&this.active===t||this._close();var n=this.tabs[t];n.active=!0,this.use_class?n.tab.addClass("active"):n.tab.show(),n.btn.addClass("active"),n.action&&n.action(t);var s="_"+t;this.no_first_tab_hash&&n.first&&s.indexOf(",")===-1&&(s=""),this.active=t,i.setUrlHash(s),this.node.addClass("disp-"+t.replace(",","-"))}},close:function(){this.closable&&this._close()},_close:function(){if(this.active){this.node.removeClass("disp-"+this.active.replace(",","-"));var t=this.tabs[this.active];t.active=!1,this.use_class?t.tab.removeClass("active"):t.tab.hide(),t.btn.removeClass("active"),this.active=!1}},_onhashchange:function(t){this.no_first_tab_hash&&t===i.getNoHashValue()&&(t="_"+this.first_tab_id),t!==i.getNoHashValue()?this.open(t.substr(1)):this.close()}},n}),define("text!lib/helpers/pager/template.html",[],function(){return'<div class="pagination">\n<ul>\n{{# has_first }}<li><a href="{{ first.url }}" class="no-page">First</a></li>{{/ has_first }}\n{{# has_prev }}<li><a href="{{ prev.url }}" class="no-page">Previous</a></li>{{/ has_prev }}\n{{# pages }}<li>\n{{# current }}<a class="active" href="">{{ display }}</a>{{/ current }}\n{{^ current }}\n{{# no_page }}<a class="no-page" href="">{{ display }}</a>{{/ no_page }}\n{{^ no_page }}<a href="{{ url }}">{{ display }}</a>{{/ no_page }}\n{{/ current }}\n</li>{{/ pages }}\n{{# has_next }}<li><a href="{{ next.url }}" class="no-page">Next</a></li>{{/ has_next }}\n{{# has_last }}<li><a href="{{ first.url }}" class="no-page">Last</a></li>{{/ has_last }}\n</ul>\n</div>'}),define("lib/helpers/pager",["mustache","text!./pager/template.html"],function(t,e){var i={};return i.get=function(i){return i.has_first=i.first!==!1,i.has_prev=i.prev!==!1,i.has_next=i.next!==!1,i.has_last=i.last!==!1,$(t.render(e,i))},i.getEmpty=function(){return $('<div class="pagination"><ul></ul></div>')},i}),define("skins/common/video/comments/form",["config/main","mustache","lib/tools","lib/helpers/inline_loader","lib/helpers/overlay/box","lib/i18n!front"],function(t,e,i,n,s,o){var a=function(a,r,l){var h={static_domain:t.domains["static"],has_profile:"undefined"!=typeof t.dyn.login_info.profile&&t.dyn.login_info.profile!==!1&&0!==t.dyn.login_info.profile.length,labels:o.__("video.comments.*"),csrf:t.data.commentscsrf};l&&!h.has_profile||(h.is_form=!0,h.has_profile&&(h.profile=t.dyn.login_info.profile,h.p=t.dyn.login_info.profile,h.pu=t.dyn.login_info.profile_url,h.iu=t.dyn.login_info.profile_img,h.n=i.ucfirst(t.dyn.login_info.profile))),this.node=$(e.render(a,h,{comment:r}));var c,d=!1,p=this,u=this.node.children("form"),f=function(t){if(t.message){var e=t.result?"text-success":"text-danger";s.get(p.getNode(),!0).setContent('<strong class="'+e+'">'+t.message+"</strong>").show()}t.result&&"function"==typeof p.posted&&p.posted(),t.result&&u[0].reset()},g=function(){if(!d){c||(c=s.get(p.getNode(),!1,"hide").setContent(n.getSafe("after",o.__("video.comments.posting")).getHtml())),c.show();var e=u.serializeArray();e.push({name:"test",value:"ok"}),$.post("/video-post-comment/"+t.data.id_video+"/",e,f,"json").fail(function(){s.get(p.getNode(),!0).setContent('<strong class="text-danger">'+o.__("video.comments.post_failed")+"</strong>").show()}).always(function(){c.hide()})}};this.node.find("button").on("click",g)};return a.prototype={posted:null,getNode:function(){return this.node}},a}),define("skins/common/video/comments",["config/main","mustache","lib/helpers/dom","lib/helpers/pager","lib/helpers/overlay/box","lib/helpers/inline_loader","lib/tools","lib/i18n!front"],function(t,e,i,n,s,o,a,r){var l,h,c,d,p,u,f,g,m,v,_,b=!1,y=[],w=t.data.nb_comments,x=!1,k=function(){for(var t in y)y[t].node.remove(),y[t].pager&&y[t].pager.remove();y=[],x=!1},E=function(t){x!==!1&&(y[x].node.toggle(t),y[x].pager&&y[x].pager.toggle(t))},T=function(){return f||(f=s.get(h,!1,"hide").setContent(o.get("after",r.__("video.loading_comments")).getNode())),f},C=function(){g&&T().show()},q=function(t){t.preventDefault(),M(parseInt($(this).attr("href").substr(1)))},N=function(t){t.preventDefault();var e=l.children(".tab-form"),n=$(e.find("input[type=text]").first());e.show(),e.length>0&&!i.isElementInView(e,!0)&&i.scrollToTop(e.offset().top-i.getViewportHeight()+e.outerHeight()+20),n.focus(),n.val(n.val()+" "),n.val($.trim(n.val()))},S=function(s){if(0===t.data.nb_comments&&0===y.length&&c.empty(),w!==s.nb_comments?k():E(!1),t.data.uploader)for(var o in s.comments)"string"==typeof s.comments[o].p&&s.comments[o].p.length>0&&(s.comments[o].is_uploader=s.comments[o].p===t.data.uploader);var h=$(e.render(m,s,{tpl:v})).appendTo(c);if(y[s.page]={node:h},s.pagination&&(y[s.page].pager=n.get(s.pagination).appendTo(c),y[s.page].pager.find("a").on("click",q)),s.comments.length>2&&(s.pagination||(y[s.page].pager=n.getEmpty().appendTo(c)),"xnxx"!==t.sitename)){var p=$('<a href="#">'+r.__("video.post_a_comment",{},"Post a comment")+"</a>").on("click",N);y[s.page].pager.children().append($('<li class="pagination-video-post-comment"></li>').append(p)),_&&_(p)}var f=l.children("h4");u||i.isElementInView(f)||a.scrollTo(f,20),d.text(s.nb_comments),x=s.page,w=s.nb_comments,g=!1},M=function(t){if(("undefined"==typeof t||isNaN(t))&&(t=0),!g&&t!==x)if("undefined"!=typeof y[t]){E(!1),x=t,E(!0);var e=l.children("h4");i.isElementInView(e)||a.scrollTo(e,20)}else{g=!0,C();var n=window.location.pathname.substr(6);"-"===n.substr(0,1)&&(n=n.substr(1)),n=n.substr(0,n.indexOf("/")),$.post("/video-get-comments/"+n+"/"+t+"/",S,"json").fail(function(t,e,i){console.error("DEBUG failed loading comments: "+e+": "+i),s.get(h,!0).setContent('<strong class="text-danger">'+r.__("video.failed_loading_comments_retry")+"</strong>").show()}).complete(function(){g=!1,T().hide()})}};return function(e,i,n,s){b||(b=!0,m=e,v=i,l=$("#tabComments"),u="tabComments_bottom_page"===l.parent().prop("id"),h=$("#comments-container"),c=$("#comments"),d=$("#video-tabs .nb-video-comments"),p=$("#video-post-comment"),p.on("click",N),t.data.nb_comments>0&&M(),"xnxx"===t.sitename?(l.append("<p><strong>"+r.__("video.comments.disabled",{},"Comments are temporarily disabled.")+"</strong></p>"),p.hide()):!s||t.dyn.login_info.is_logged?require(["skins/common/video/comments/form"],function(t){var e=new t(n,i,s);e.posted=function(){k(),M(0)},l.append(e.getNode())}):(s(p),_=s))}}),define("text!skins/xnxx/video/comments/page.html",[],function(){return"<div>{{#comments}}{{> tpl}}{{/comments}}</div>\n"}),define("text!skins/xnxx/video/comments/comment.html",[],function(){return'<div class="comment">\n\t<div class="comment-title">{{ n }}{{# d }} <span class="date">{{ d }}</span>{{/ d }}</div>\n\t<div class="comment-text">{{{ c }}}</div>\n</div>'}),define("text!skins/xnxx/video/comments/form.html",[],function(){return'<div class="tab-form">\n\t<form id="video-comment-form">\n\t\t<input type="hidden" name="csrf" value="{{ csrf }}" />\n\t\t<div class="form-group"><label class="control-label">{{{ labels.write_name }}}:</label><input type="text" class="form-control" name="user" /></div>\n\t\t<div class="form-group"><label class="control-label">{{{ labels.your_comment }}}:</label><textarea name="comment" rows="4" class="form-control" required></textarea></div>\n\t\t<div class="text-right"><button type="button" class="btn btn-primary">{{{ labels.post }}}</button></div>\n\t</form>\n</div>'}),define("skins/xnxx/video/comments",["skins/common/video/comments","text!./comments/page.html","text!./comments/comment.html","text!./comments/form.html"],function(t,e,i,n){return function(){t(e,i,n,!1)}}),define("skins/common/video/download",["config/main","lib/helpers/inline_loader","lib/i18n!front"],function(t,e,i){var n=function(t){this.displayed=!1,this.key_hd_for_premium=t};return n.prototype={check:function(){this.displayed||(this.displayed=!0,this.contener=$("#tabDownload"),this.messages=i.__("video.download.*"),this.check_download())},on_not_logged:function(){console.error("download.on_not_logged not implemented")},on_checked:function(t){if(console.info(t),!t.LOGGED)return void this.on_not_logged();var e=$("<p>").addClass("text-center");if("string"==typeof t.ERROR)e.addClass("text-danger").html(t.ERROR);else if("string"!=typeof t.URL){var i=this;e.addClass("text-danger").html(this.messages.error_occured_retry.replace("%here%",'<a href="#"><strong>'+this.messages.here+"</strong></a>")).find("a").on("click",function(t){i.check_download(t)})}else{var n=[];t.MP4HD_AVAILABLE&&!t.MP4HD_ERROR&&t.URL_MP4HD&&n.push('<a href="'+t.URL_MP4HD+'" target="_blank"><strong>'+this.messages.high_qual+"</strong></a>"),n.push('<a href="'+t.URL+'" target="_blank"><strong>'+this.messages.medium_qual+"</strong></a>"),t.URL_LOW&&n.push('<a href="'+t.URL_LOW+'" target="_blank"><strong>'+this.messages.low_qual+"</strong></a>");var s=this.messages.dl_high_medium_low.replace("%high_medium_low%",n.join(" / "));t.MP4HD_AVAILABLE&&(t.IS_PREMIUM?!t.MP4HD_ERROR&&t.URL_MP4HD||(s+="<br>"+this.messages.hd_available_soon.replace("%link_start%",'<a href="#" class="retry"><strong>').replace("%link_end%","</strong></a>")):s+="<br>"+this.messages[this.key_hd_for_premium]);var i=this;e.addClass("download-ready").html(s).find("a.retry").on("click",function(t){i.check_download(t)})}this.contener.empty().append(e)},check_download:function(i){"undefined"!=typeof i&&i.preventDefault(),this.contener.append($("<p>").addClass("text-danger text-center").append(e.getSafe("after",this.messages.checking).getNode()));var n=this;$.post("/video-download/"+t.data.id_video+"/",{},function(t){n.on_checked(t)},"json").fail(function(){n.contener.empty().append($("<p>").addClass("text-danger text-center").html(n.messages.error_occured_retry.replace("%here%",'<a href="#">'+n.messages.here+"</a>"))).find("a").on("click",function(t){n.check_download(t)})})}},n}),define("text!skins/xnxx/form/login.html",[],function(){return'<div>\n\t<h4 class="bg-title grey-dark top no-border title"></h4>\n\t<div class="tab-form">\n\t\t<div class="row">\n\t\t\t<div class="col-sm-7 col-md-6 col-lg-7 left-col">\n\t\t\t\t<form id="create-account-form" method="POST" class="form-horizontal">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t <label for="{{ base_id }}-tab-create-account-form-login" class="col-sm-5 col-md-4 control-label">{{{ labels.your_login }}}:</label>\n\t\t\t\t\t\t <div class="col-sm-7 col-md-8"><input type="email" name="email" id="{{ base_id }}-tab-create-account-form-login" class="form-control" required /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t <label for="{{ base_id }}-tab-create-account-form-profile" class="col-sm-5 col-md-4 control-label">{{{ labels.profile_name }}}</label>\n\t\t\t\t\t\t <div class="col-sm-7 col-md-8"><input type="text" name="profile" id="{{ base_id }}-tab-create-account-form-profile" class="form-control" required /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t <label for="{{ base_id }}-tab-create-account-form-password" class="col-sm-5 col-md-4 control-label">{{{ labels.your_password }}}:</label>\n\t\t\t\t\t\t <div class="col-sm-7 col-md-8"><input type="password" name="password" id="{{ base_id }}-tab-create-account-form-password" class="form-control" required /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t <label for="{{ base_id }}-tab-create-account-form-password-confirm" class="col-sm-5 col-md-4 control-label">{{{ labels.confirm_password }}}:</label>\n\t\t\t\t\t\t <div class="col-sm-7 col-md-8"><input type="password" name="password_confirm" id="{{ base_id }}-tab-create-account-form-password-confirm" class="form-control" required /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<div class="col-sm-offset-5 col-sm-7 col-md-offset-4 col-md-8">\n\t\t\t\t\t\t\t<div class="checkbox">\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\t<input type="checkbox" name="tos_pp" required /> {{{ labels.signup_accept_tos_pp }}}\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<div class="col-xs-12 text-right">\n\t\t\t\t\t\t\t<button type="submit" class="btn btn-primary" name="log">{{{ labels.create_account }}}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t\t<div class="col-sm-5 col-md-6 col-lg-5 right-col">\n\t\t\t\t<form id="login-form" method="POST" class="form-horizontal">\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t <label for="{{ base_id }}-tab-login-form-login" class="col-sm-5 col-md-4 control-label">{{{ labels.your_login }}}:</label>\n\t\t\t\t\t\t <div class="col-sm-7 col-md-8"><input type="email" name="login" id="{{ base_id }}-tab-login-form-login" class="form-control" required /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t <label for="{{ base_id }}-tab-login-form-password" class="col-sm-5 col-md-4 control-label">{{{ labels.your_password }}}:</label>\n\t\t\t\t\t\t <div class="col-sm-7 col-md-8"><input type="password" name="password" id="{{ base_id }}-tab-login-form-password" class="form-control" required /></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="form-group">\n\t\t\t\t\t\t<div class="col-xs-12 text-right">\n\t\t\t\t\t\t\t<a href="/account/lostpassword" target="_blank" class="forgot-password">{{{ labels.forgot_password }}}</a>\n\t\t\t\t\t\t\t<button type="submit" class="btn btn-primary" name="log">{{{ labels.login }}}</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t\t{{# footer }}<p class="footer-note">{{{ footer }}}</p>{{/ footer }}\n\t</div>\n</div>'}),define("skins/xnxx/form/login",["config/main","mustache","static/utils","text!skins/xnxx/form/login.html","lib/helpers/inline_loader","lib/helpers/overlay/box","lib/i18n!front"],function(t,e,i,n,s,o,a){var r=function(t,r){this.messages=a.__("login_form.*",{"%tos_link%":'<a href="'+window.location.protocol+'//www.xnxx.com/tos/" target="_blank">',"%pp_link%":'<a href="'+window.location.protocol+'//www.xnxx.com/privacy_policy" target="_blank">',"%end_link%":"</a>"}),this.node=$(e.render(n,{base_id:(new Date).getTime(),footer:r,labels:this.messages})),this.title=this.node.find(".title").html(t),this.overlay;var l=this;this.create_form=this.node.find("#create-account-form"),this.create_form.on("submit",function(t){t.preventDefault(),l.get_overlay().setContent(s.get("after",i.unescape(l.messages.creating_account)).getHtml()).show();var e=l.create_form.serializeArray();$.post("/account/create/rpc",e,function(t){l.done(t,l.messages.creating_account_failed_retry)},"json").fail(function(){o.get(l.getNode(),!0).setContent('<strong class="text-danger">'+l.messages.creating_account_failed_retry+"</strong>").show()}).always(function(){l.get_overlay().hide()})}),this.login_form=this.node.find("#login-form"),this.login_form.on("submit",function(t){t.preventDefault(),l.get_overlay().setContent(s.get("after",i.unescape(l.messages.loggin_in)).getHtml()).show();var e=l.login_form.serializeArray();$.post("/account/login/rpc",e,function(t){l.done(t,l.messages.login_failed_retry)},"json").fail(function(){o.get(l.getNode(),!0).setContent('<strong class="text-danger">'+l.messages.login_failed_retry+"</strong>").show()}).always(function(){l.get_overlay().hide()})})};return r.prototype={getNode:function(){return this.node},setTitle:function(t){this.title.text(t)},onLoggedIn:function(){console.error("login.onLoggedIn not implemented")},get_overlay:function(){return this.overlay||(this.overlay=o.get(this.getNode(),!1,"hide")),this.overlay},done:function(t,e){t.result?this.onLoggedIn():"string"==typeof t.message?o.get(this.getNode(),!0).setContent('<strong class="text-danger">'+t.message+"</strong>").show():o.get(this.getNode(),!0).setContent('<strong class="text-danger">'+e+"</strong>").show()}},r}),define("skins/xnxx/video/download",["skins/common/video/download","lib/i18n!front"],function(t,e){var i=new t("hd_for_blue");return i.on_not_logged=function(){var t=this;require(["skins/xnxx/form/login"],function(i){var n=new i(e.__("video.download_comment_title"),e.__("login_form.we_dont_send_emails"));n.onLoggedIn=function(){t.check_download()},t.contener.empty().append(n.getNode())})},function(){i.check()}}),define("text!skins/common/video/playlist.html",[],function(){return'<div id="video-playlist">\n\t<div id="playlist-header" class="hidden">\n\t\t<button class="btn btn-default pull-right next" title="{{{ labels.next }}}">&gt;</button>\n\t\t<button class="btn btn-default pull-right toggle" title="{{{ labels.hide }}}">&#9650;</button>\n\t\t<button class="btn btn-default pull-left prev" title="{{{ labels.prev }}}">&lt;</button>\n\t\t<div class="playlist-vote"></div>\n\t\t<h4></h4>\n\t</div>\n\t<div id="playlist-content">\n\t\t<div class="mozaique thumbs-5-cols"></div>\n\t</div>\n</div>'}),define("skins/common/video/playlist",["config/main","mustache","static/utils","lib/tools","lib/helpers/inline_loader","lib/helpers/popup","lib/helpers/thumbs_rotator","text!./playlist.html","lib/i18n!front"],function(t,e,i,n,s,o,a,r,l){var h=n.parseUrl(window.location.href,"query",!0),c=0;if("undefined"!=typeof h.pl){var d=!1;if(0===h.pl.search(/^\d+$/)){if(c=parseInt(h.pl),c<0)return}else{if(0!==h.pl.search(/^-[\da-z]+$/))return;c=h.pl,d=!0}var p=window.location.pathname.split("/"),u=d?p[1].substr(5):parseInt(p[1].substr(5)),f="favorite";if("string"==typeof h.pltype){if("related"!==h.pltype)return;f=h.pltype}var g,m,v,_,b,y,w,x,k,E,T,C,q,N,S,M=l.__("playlist.*"),P=!1,O=!1,R=!1,A=0,I=null,L=!1,H=!1,D=!1,j=!1,X=0,Y=!1,z=!1,V=!1,U=!1,F=!0,W=function(t,e){var i;return i="related"===f?"/video"+c+"/related/playlist/"+t:"/favorite/"+c+"/playlist/"+t,e&&(i+="/"+e),i},B=function(t,e){var i="";e&&(i=' class="text-danger"'),j?j.setContent("<strong"+i+">"+t+"</strong>"):j=new o(y,"<strong"+i+">"+t+"</strong>",{trigger:!1,position:{v:"below",h:"right"},relative_to:$("#video-playlist")}),j.open()},G=function(t,e){var i="";e&&(i=' class="text-danger"'),H?H.setContent("<strong"+i+">"+t+"</strong>"):H=new o(w,"<strong"+i+">"+t+"</strong>",{trigger:!1,position:{v:"below",h:"left"},relative_to:$("#video-playlist")}),H.open()},K=function(t,e,i){"after"===t?B(e,i):G(e,i)},J=function(){j&&j.close(),H&&H.close()},Q=function(){var t=v.width();E=k.outerWidth(),T=Math.round(t/E),C=2,T<=2?C=0:T<=4&&(C=1)},Z=function(t,e){if(!S){var n;if("next"===t){if(n=I+T,n+2*T>=X&&st(),n>X-T){if(!D)return;if(n=X-T,n===I)return}}else if("prev"===t){if(n=I-T,n-2*T<=0&&ot(),n<0){if(!L)return;if(n=0,0===I)return}}else n=t;"string"==typeof t&&(R=!0),P=n===X-T&&U&&D,y.toggleClass("invisible",P),O=0===n&&U&&L,w.toggleClass("invisible",O),I=n,x.addClass("disabled").css("cursor","wait"),I+T>X-T&&!D&&Y&&y.html(s.getImg()).prop("title",i.unescape(M.loading_next)),I-T<0&&!L&&z&&w.html(s.getImg()).prop("title",i.unescape(M.loading_prev));var o=function(){(I+T<=X-T||D||!Y)&&(P=I+T===X&&D,y.html("&gt;").toggleClass("disabled",P).css("cursor","").toggleClass("invisible",P)),(I-T>=0||L||!z)&&(O=0===I&&L,w.html("&lt;").toggleClass("disabled",O).css("cursor","").toggleClass("invisible",O)),S=!1,V&&V()};e?(k.css("margin-left","-"+I*E+"px"),o()):(S=!0,k.animate({"margin-left":"-"+I*E+"px"},"false",o))}},tt=function(){return!R&&(Z(Math.max(0,Math.min(A-C,X-T)),!0),!0)},et=function(){_.html('<p class="text-center"><strong><a href="#" class="text-danger">'+M.failed_loading_retry+"</a></strong></p>").find("a").on("click",function(t){return t.preventDefault(),it(),!1})},it=function(){return g=$(e.render(r,{labels:M})),m=g.find("#playlist-header"),v=g.find("#playlist-content"),_=v.children(".mozaique"),b=m.children("button.toggle"),y=m.children("button.next"),w=m.children("button.prev"),x=y.add(w),_.html('<p class="text-center">'+s.getSafe("after",M.loading).getHtml()+"</p>"),$.post(W(u),function(e){if(e.result){"object"==typeof html5player&&"function"==typeof html5player.setPlaylist&&html5player.setPlaylist(e.title,e.url,e.videos,e.nb_videos,e.position);var s=e.title;"default"===e.title.toLowerCase()&&(s=M.playlist);var o='<span class="icon playlist" '+M.playlist+'></span> <a href="'+e.url+'">'+s+"</a>";e.user&&!e.is_owner&&(o+=" <small>"+l.__("misc.by_user",{"%user%":'<a href="/profiles/'+e.user+'">'+e.username+"</a>"})+"</small>"),o+=' <span class="badge">'+e.nb_videos_str+"</span>",m.removeClass("hidden").children("h4").html(o);var r=$(n.replaceThumbcast(e.html));_.html(r),n.executePendingPrepare(_.find(".thumb-block")),a(r,!0);var h="xnxx"===t.sitename?M.playing_video_x.replace("%video_idx%",(e.position+1).toFixed(0)).replace("%nb_videos%",e.nb_videos.toFixed(0)):M.now_playing;return _.children(":eq("+e.posinlist+")").addClass("selected").find(".thumb-inside").append('<div class="thumb-overlay"><p>'+h+"</p></div>"),L=e.start_reached,D=e.end_reached,X=e.videos.length,k=_.children().first(),q=e.videos[0].id,N=e.videos[X-1].id,I=e.posinlist,A=I,Q(),tt(),b.on("click",function(){v.stop(!0).slideToggle("fast"),F=!F,b.html(F?"&#9650;":"&#9660").prop("title",i.unescape(F?M.hide:M.display)),w.toggleClass("invisible",!F||O),y.toggleClass("invisible",!F||P)}),y.on("click",function(){J(),Z("next")}),w.on("click",function(){J(),Z("prev")}),U=!0,void $(window).resize(function(){X>0&&(S&&(k.stop(!0,!0),S=!1),Q(),tt()||Z(I,!0))})}return e.message?void _.html('<p class="text-center"><strong>'+e.message+"</strong></p>"):void et()},"json").fail(et),g},nt=function(t,e,i,n){$.post(W(t,e),function(t){return t.result?(i(t),void n()):(n(),t.message?void K(e,t.message,!0):(K(e,M.failed_loading_vids,!0),void Z(I,!0)))},"json").fail(function(){n(),K(e,M.failed_loading_vids,!0)})},st=function(){if(!Y&&!D)return Y=!0,nt(N,"after",function(t){var e=$(n.replaceThumbcast(t.html));_.append(e),n.executePendingPrepare(_.find(".thumb-block")),a(e,!0),t.end_reached&&(D=!0),X+=t.videos.length,N=t.videos[t.videos.length-1],Z(I,!0)},function(){Y=!1})},ot=function(){if(!z&&!L)return z=!0,nt(q,"before",function(t){var e=function(){var e=$(n.replaceThumbcast(t.html));_.prepend(e),n.executePendingPrepare(_.find(".thumb-block")),a(e,!0),t.start_reached&&(L=!0),X+=t.videos.length,k.css("margin-left",""),k=_.children().first(),q=t.videos[0],I+=t.videos.length,V=!1,Z(I,!0)};S?V=e:e()},function(){z=!1})};return it}}),define("text!skins/xnxx/video/sponsor_link.html",[],function(){return'<div id="video-sponsor-links"><a class="mobile-show" id="show-channel-desc">+</a>{{{ more_at }}} <a href="{{{sponsor.u}}}" target="_blank"><strong>{{{sponsor.n}}}</strong></a> <span class="channel-desc">- {{{sponsor.d}}}</span></div>'}),define("text!skins/xnxx/video/report.html",[],function(){return'<div class="tab-form">\n\t<form id="video-report-form" class="form-horizontal">\n\t\t<div class="row">\n\t\t\t<div class="col-sm-6">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-xs-2 control-label" for="video-report-form-email">{{{ labels.reason }}}:</label>\n\t\t\t\t\t<div class="col-xs-10 text-center">\n\t\t\t\t\t\t{{# reasons }}\n\t\t\t\t\t\t<div class="radio-inline"><label><input type="radio" name="reason" value="{{ value }}"{{# checked }} checked{{/ checked }}> {{ label }}</label></div>\n\t\t\t\t\t\t{{/ reasons }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<label class="col-xs-2 control-label" for="video-report-form-email">{{{ labels.email }}}:</label>\n\t\t\t\t\t<div class="col-xs-10">\n\t\t\t\t\t\t<input type="email" name="email" id="video-report-form-email" class="form-control" required placeholder="{{{ labels.leave_email }}}" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="col-sm-6">\n\t\t\t\t<div class="form-group">\n\t\t\t\t\t<div class="col-sm-12">\n\t\t\t\t\t\t<textarea class="form-control" name="message" rows="3" required placeholder="{{{ labels.give_details }}}"></textarea>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class="form-group">\n\t\t\t<div class="col-xs-12">\n\t\t\t\t<button type="button" class="submit btn btn-primary pull-right"><strong>{{{ labels.report }}}</strong></button>\n\t\t\t\t<a href="http://info.xvideos.com/content/" target="_blank" class="btn btn-primary btn-sm wrap">{{{ labels.content_owners }}}</a>\n\t\t\t</div>\n\t\t</div>\n\t</form>\n</div>'}),define("skins/common/video/lastviews",["static/cookies"],function(t){var e="last_views",i=function(){};return i.prototype={storageAvailable:function(){try{var t=window.localStorage,e="__storage_test__";return t.setItem(e,e),t.removeItem(e),!0}catch(i){return!1}},declareVideoView:function(i){var n=[],s=t.get(e);if(s){var o=JSON.parse(s);o&&(n=o)}for(var a in n)if(n[a]===i)return void console.log("Video "+i+" already registered");n.length>200&&n.shift(),n.push(i),t.setLocal(e,JSON.stringify(n),12096e5,"/"),console.log("Video "+i+" processed")},getHistory:function(){var i=t.get(e);if(!i)return[];var n=JSON.parse(i);return n?n:[]},resetRelated:function(){}},new i}),define("skins/common/video/related",["config/main","lib/helpers/dom","lib/helpers/thumbs_rotator"],function(t,e,i){var n,s=$("#related-videos"),o=s.children(".show-more"),a=!1,r=s.children(".mozaique"),l=r.children(".thumb-block"),h=!1;0===o.length&&(o=s.children(".row").find(".show-more"));var c=function(t){var s=t===!0;if(s||h){h=!1,n=null;var o=!1,r=!1,c=$();if(!a){var d=e.getViewportWidth();o=d<=480?"after-8":d<=768?"after-9":d<=992?"after-8":"after-10"}l=l.filter(function(){var t=$(this),e=t.find(".thumb a"),i=e.data("src");if(!i)return!1;if(r)return!0;if(o&&t.hasClass(o))return r=!0,!0;var n=e.data("vid");return e.append('<img src="'+i+'" id="pic_'+n+'" style="display:none;" onload="this.style.display=\'\';" />'),c=c.add(t),!1}),c.length>0&&i(c,!0)}};c(!0),o.on("click",function(t){t.preventDefault(),o.off("click"),a=!0,c(!0),s.addClass("expanded")}),$(window).on("resize",function(){h=!0,n||(n=setTimeout(c,500))}),$(document).ready(function(){c(!0)})}),define("skins/common/video/vote",["config/main","lib/helpers/inline_loader","lib/helpers/popup","lib/i18n!front"],function(t,e,i,n){var s,o=$("#video-views-votes,#video-votes"),a=o.find(".vote-actions a"),r=!1,l=null,h=null,c=function(t,e){return s?s.setButton(t).setContent(e):s=new i(t,e,{relative_to:o.parent(),position:{v:"below",h:"left"},trigger:!1,autoclose:3e3,popup_class:"video-vote-popup"}),s};a.on("click",function(i){if(i.preventDefault(),!r){r=!0;var s=$(this),d=s.html(),p=s.hasClass("vote-action-good"),u=p?t.data.vote_urls.good:t.data.vote_urls.bad;a.addClass("disabled"),s.html(e.getImg()),$.post(u,function(t){s.html(d);var e;if(t.result){o.find(".rating-bar .total").text(t.total),o.find(".rating-bar .pgs-bar div").css("width",t.rating+"%");var i=o.find(".rating-box"),r=i.children("span").not(".decimals"),h=t.rating.toFixed(2).split(".");1===h.length&&h.push("00"),i.html(h[0]+'<span class="mobile-hide">.'+h[1]+"</span>%").prepend(r),a.filter(".vote-action-good").children(".value").text(t.vgood),a.filter(".vote-action-bad").children(".value").text(t.vbad),"function"==typeof l&&(e=l(p)),e||(e=n.__("video.votes.thanks")),e="<strong>"+e+"</strong>"}else e='<strong class="text-danger">'+t.message+"</strong>";c(s,e).open()},"json").fail(function(){s.html(d),c(s,'<strong class="text-danger">'+n.__("error.err_please_reload")+"</strong>").open()}),t.dyn.login_info.is_logged||"function"!=typeof h||h(p)}});var d=function(t,e){l=t,h=e};return d}),define("text!skins/xnxx/video/user_suggest/lang_list.html",[],function(){return'<ul id="{{{ id }}}" class="row video-page-lang-sel">\n{{#languages}}\n\t<li class="col {{#col_class}}{{{ col_class }}}{{/col_class}}{{^col_class}}col-xs-6 col-sm-4 col-lg-3 col-xl-2{{/col_class}} is-{{{ used_status }}}" data-order="{{{ order }}}">\n\t\t<a data-lang="{{{ code }}}">\n\t\t\t{{#country}}\n\t\t\t\t<span class="flag-small flag-{{{ country }}}"></span>\n\t\t\t{{/country}}\n\t\t\t{{^country}}\n\t\t\t\t<span class="no-flag"></span>\n\t\t\t{{/country}}\n\t\t\t{{ name }}\n\t\t</a>\n\t</li>\n\t{{/languages}}\n</ul>';
}),define("skins/xnxx/video/user_suggest/locales",["mustache","lib/helpers/popup","static/storage","config/main","text!./lang_list.html"],function(t,e,i,n,s){var o=function(t){this.form=t};return o.prototype={all:null,used:[],form:null,pop_count_id:0,init:function(t,e){var n=this;if(null===this.all){if(st_get=i.get("locales_","VideoLocales"),!st_get||st_get.time<$.now()-864e5)$.ajax({dataType:"json",url:"/video-user-suggest/languages",success:function(e){if(n.init_set_all_languages(e),"function"==typeof t)return t()},error:function(){if("function"==typeof e)return e()}});else if(this.all=st_get.languages,"function"==typeof t)return t()}else if("function"==typeof t)return t()},init_set_all_languages:function(t){this.all=t.languages,i.set("locales_",{languages:this.all,time:$.now()},"VideoLocales")},compile_elem:function(t){if(t.c&&t.t){var e={code:t.c,name:t.t,used_status:this.is_used_by_lang(t.c)?"used":"unused",word_count_mode:t.w?t.w:"NORMAL"};return t.f&&(e.country=t.f.toLowerCase()),t.r&&(e.rtl="rtl"),e}return!1},is_used_by_lang:function(t){},update:function(){},get:function(t){for(var e in this.all)if(this.all[e].c==t)return this.compile_elem(this.all[e]);return!1},get_all:function(){var t=[];for(var e in this.all){var i=this.compile_elem(this.all[e]);i.order=e,i!==!1&&t.push(i)}return t},get_current:function(){return this.get(n.dyn.locale)},set_pop_lang:function(i,n,o,a){this.update(),"object"!=typeof a&&(a={v:"below",h:"left"});var r=++this.pop_count_id,l=new e($(i),"",this.get_new_popup_options(a)),h=this;return l.onOpen=function(){this.setContent($(t.render(s,h.get_tpl_lang_list_options(r)))),$("#video-page-lang-sel-"+r+" li.is-unused a").click(n),$("#video-page-lang-sel-"+r+" li.is-used a").click(o),h.organize_col(l),$(window).resize(function(){h.organize_col(l)})},l},get_new_popup_options:function(t){return{offset:{below:-5,above:0,left:0,right:0},position:t,popup_class:"video-page-lang-switcher-popup"}},get_tpl_lang_list_options:function(t){return{id:"video-page-lang-sel-"+t,languages:this.get_all()}},organize_col:function(t){if(t&&0!=t.opened&&$(t.popup).length){var e=$(t.popup).find("ul"),i=parseInt(e.width()),n=e.children("li"),s=parseInt(n.first().width()),o=Math.round(i/s),a=Math.ceil(n.length/o);n.detach().sort(function(t,e){var i=parseInt($(t).data("order")),n=parseInt($(e).data("order"));return i=i%a*999+i,n=n%a*999+n,i<n?-1:i>n?1:0}),e.append(n)}}},o}),define("skins/xnxx/video/user_suggest/title/locales",["../locales"],function(t){var e=function(e){t.apply(this,arguments)};return e.prototype=new t,e.prototype.is_used_by_lang=function(t){return $.inArray(t,this.used)!==-1},e.prototype.update=function(){this.used=[];for(i in this.form.inputs)this.used.push(this.form.inputs[i].lang)},e}),define("text!skins/xnxx/video/user_suggest/title/input.html",[],function(){return'<div class="input-group input-lang-group" id="video-rename-{{{ id }}}">\n\t<span class="input-group-addon input-lang" >\n\t\t{{#locale.country}}\n\t\t\t<span class="flag flag-{{{ locale.country }}}" title="{{{ locale.name }}}"></span>\n\t\t{{/locale.country}}\n\t\t{{^locale.country}}\n\t\t\t{{{ locale.name }}}\n\t\t{{/locale.country}}\n\t\t<input type="hidden" name="lang[{{{ id }}}]" value="{{{ locale.code }}}"/>\n\t</span>\n\t\n\t<input type="text" name="title[{{{ id }}}]" value="{{{ inp_value }}}" class="form-control {{#locale.rtl}}rtl{{/locale.rtl}}" placeholder="{{{ inp_placeholder }}}" maxlength="{{{ max_length }}}"/>\n\t\n\t<span class="input-group-addon lang-save icon-switch">\n\t\t<span>{{{ save }}}</span>\n\t\t<span class="icon save blue" title="{{{ save }}}"></span>\n\t\t<em></em>\n\t</span>\n</div>\n'}),define("skins/xnxx/video/user_suggest/title/input",["mustache","lib/helpers/popup","lib/helpers/inline_loader","static/utils","lib/i18n!front","text!./input.html"],function(t,e,i,n,s,o){var a=function(t,e,i,n,s,o){this.id=t,this.lang=e,this.rename_form=i,this.word_count_mode=this.rename_form.locales.get(this.lang).word_count_mode,"string"!=typeof n&&(n=""),this.saved_title=this.title=n,this.save_status="saved","undefined"!=typeof s&&s!==!1&&(this.id_req=s),"undefined"!=typeof o&&o!==!1&&(this.token=o)};return a.prototype={id:0,lang:null,rename_form:null,word_count_mode:null,title:"",saved_title:"",save_status:"",id_req:null,token:null,pop:null,keyup_timeout:null,min_words_or_chars:4,max_chars:100,render:function(){var e=t.render(o,{id:this.id,locale:this.rename_form.locales.get(this.lang),save:s.__("misc.save"),inp_value:n.escape(this.title,!0),inp_placeholder:s.__("misc.your_title_here"),max_length:this.max_chars});return e},update:function(){var t=this;$("#video-rename-"+this.id+" .lang-save:not(.init-ok)").click(function(){t.save()}).hover(function(){t.is_error_tooltip()}).addClass("init-ok").find("em").append($(i.getImg()));var e=function(){null!==t.keyup_timeout&&(clearTimeout(t.keyup_timeout),t.keyup_timeout=null),t.keyup_timeout=setTimeout(function(){t.keyup_timeout=null,t.is_error_tooltip()},1e3)};$("#video-rename-"+this.id+" input[type=text]:not(.init-ok)").blur(function(){t.updated_title(),t.is_error_tooltip()}).focus(function(){t.updated_title("force"),e()}).on("paste",function(){t.updated_title()}).keyup(function(i){t.updated_title(),e(),13==i.which&&t.save()}).addClass("init-ok"),this.updated_title("init")},save:function(){this.updated_title("force"),"need_saving"===this.save_status?(this.save_status="saving",this.add_save_class("saving"),$("#video-rename-"+this.id+" input[type=text]").prop("disabled",!0),this.rename_form.save_input(this.lang,this.title,this.id_req,this.token)):(this.set_focus(),this.is_error_tooltip())},saved:function(t,e){this.saved_title=this.title,this.add_save_class("saved"),$("#video-rename-"+this.id+" input[type=text]").prop("disabled",!1),this.save_status="saved","undefined"!=typeof t&&(this.id_req=t),"undefined"!=typeof e&&(this.token=e)},set_title:function(t,e){e===!0?this.title=t:($("#video-rename-"+this.id+" input[type=text]").val(t),this.updated_title())},updated_title:function(t){var e=$("#video-rename-"+this.id+" input[type=text]").val();if("force"===t||"save_failed"===t||"init"===t||e!=this.title){var i=this.is_error(e);i!==!1?(this.save_status="not_savable",this.add_save_class("not_savable"),$("#video-rename-"+this.id+" input[type=text]").prop("disabled",!1)):(this.close_tooltip(),this.saved_title===e?(this.save_status="saved",this.set_title(e,!0),this.saved()):this.title===e&&"save_failed"!==t||void 0===e||(this.save_status="need_saving",this.set_title(e,!0),this.add_save_class(),$("#video-rename-"+this.id+" input[type=text]").prop("disabled",!1)))}},is_error:function(t){if("string"!=typeof t&&(t=$("#video-rename-"+this.id+" input[type=text]").val()),"string"!=typeof t)return s.__("video.rename.min_chars_error",{"%min%":String(this.min_tag_chars)});var e=!1;if("NORMAL"===this.word_count_mode){var i=t.split(/\s+/),n=0;for(var o in i)i[o].length>0&&n++;n<this.min_words_or_chars&&(e=s.__("video.rename.min_words_error",{"%min%":String(this.min_words_or_chars)}))}else $.trim(t).length<this.min_words_or_chars&&(e=s.__("video.rename.min_chars_error",{"%min%":String(this.min_words_or_chars)}));return $.trim(t).length>this.max_chars&&(e=s.__("video.rename.max_chars_error",{"%max%":String(this.max_chars)})),e},is_error_tooltip:function(){"not_savable"===this.save_status&&this.open_tooltip(this.is_error())},open_tooltip:function(t){null===this.pop&&(this.pop=new e($("#video-rename-"+this.id+" .lang-save"),"",{trigger:!1,position:{v:"above",h:"right"},popup_class:"rename-input-error",autoclose:!1}));var i=this;this.pop.onOpen=function(){setTimeout(function(){i.close_tooltip()},2e3)},this.pop.open(),this.pop.setContent($("<p class='message'>"+t+"</p>"))},close_tooltip:function(){null!==this.pop&&this.pop.isOpened()&&this.pop.close()},add_save_class:function(t){var e="saving saved not_savable";"string"==typeof t?$("#video-rename-"+this.id+" .lang-save").removeClass(e).addClass(t):$("#video-rename-"+this.id+" .lang-save").removeClass(e)},is_focus:function(){return $("#video-rename-"+this.id+" input[type=text]").is(":focus")},set_focus:function(){this.is_focus()||$("#video-rename-"+this.id+" input[type=text]").select()},get_lang_btn_width:function(){return $("#video-rename-"+this.id+" .input-lang").width()},set_lang_btn_width:function(t){$("#video-rename-"+this.id+" .input-lang").width(t).css("max-width",t+"px")}},a}),define("text!skins/xnxx/video/user_suggest/title/new_input_btn.html",[],function(){return'<button type="button" id="video-rename-new-lang" class="btn btn-default">\n\t{{{ add_title }}}\n</button>'}),define("skins/xnxx/video/user_suggest/title/new_input_btn",["mustache","lib/helpers/popup","lib/i18n!front","text!./new_input_btn.html"],function(t,e,i,n){var s=function(t){this.form=t};return s.prototype={form:null,pop:null,updated:!1,render:function(){return t.render(n,{add_title:i.__("other_languages")})},update:function(){if(this.updated===!1){this.updated="processing";var t=$("#video-rename-new-lang");if($(t).length){var e=this;this.pop=this.form.locales.set_pop_lang(t,function(){e.form.create_input($(this).data("lang")),e.form.focus_input($(this).data("lang"))},function(){e.form.focus_input($(this).data("lang"))}),this.updated=!0}}},close_lang_popup:function(){this.pop&&"function"==typeof this.pop.close&&this.pop.close()}},s}),define("text!skins/xnxx/video/user_suggest/title/edit_title_btn.html",[],function(){return'\n<button type="button" id="video-rename" class="loading">\n\t<span>\n\t\t<span class="icon edit"></span>\n\t\t{{{ edit }}}\n\t</span>\n\t{{{ loader }}}\n</button>'}),define("text!skins/xnxx/video/user_suggest/title/form.html",[],function(){return'<div>\n\t<h1>{{{ title }}} :</h1>\n\t<h2>{{{ video_title }}}</h2>\n\t<h3>{{{warning}}}</h3>\n\t<form id="video-rename-form">\n\t\t{{{ new_inp_btn }}}\n\t</form>\n</div>'}),define("skins/xnxx/video/user_suggest/title",["mustache","lib/tools","lib/helpers/overlay/box","static/storage","lib/helpers/inline_loader","lib/i18n!front","config/main","./title/locales","./title/input","./title/new_input_btn","text!./title/edit_title_btn.html","text!./title/form.html"],function(t,e,i,n,s,o,a,r,l,h,c,d){var p=function(){$("#video-content-metadata .infobar .rename-space").replaceWith($(t.render(c,{edit:o.__("misc.edit"),loader:s.getImg()}))),this.init_vars()};p.prototype={initForm:!1,overlay:null,locales:null,video:null,inputs:[],inputs_id_count:0,new_inp_btn:null,init_vars:function(){this.init_video_infos(),this.inputs=[],this.inputs_id_count=0,this.new_inp_btn=new h(this),this.locales=new r(this);var t=this;this.locales.init(function(){t.init_locales_ok()},function(){t.init_locales_fail()})},init_locales_ok:function(){var t=this;$("#video-rename").click(function(){t.open_form()}).removeClass("loading")},init_locales_fail:function(){$("#video-rename").detach()},init_video_infos:function(){if(!this.video){if(this.video={id:a.data.id_video},a.dyn.video_titles.length<1)return;this.video.current_title=a.dyn.video_titles[0].t,this.video.current_title_lang=a.dyn.video_titles[0].l}},open_form:function(){if(this.initForm===!1){this.overlay=new i(".video-page",!0,"hide"),this.overlay.addClass("video-user-suggest-overlay");var n=this,s=this.video.current_title_lang?this.video.current_title:"";form=$(t.render(d,{title:o.__("video.rename.title_rename_or_translate"),video_title:s,warning:o.__("video.rename.area_not_for_commenting",{"%start_link%":'<a class="commenting" href="#">',"%end_link%":"</a>"},"This area is NOT for %start_link%commenting%end_link%"),new_inp_btn:this.new_inp_btn.render(),submit:o.__("misc.save")})),form.find("a.commenting").on("click",function(t){t.preventDefault();var i=$(".tab-buttons > .metadata-btn").first();i.hasClass("active")||i.click(),e.scrollTo(i,50),n.overlay.hide()}),this.overlay.setContent(form),this.overlay.onHide=function(){n.close_lang_popups()}}this.overlay.show();var a=this.get_local_saved_inputs();if(this.initForm===!1){for(var r in a)this.create_input(a[r].lang,a[r].title,a[r].id_req,a[r].token);this.inputs.length<1&&this.video.current_title_lang&&this.create_input(this.video.current_title_lang);var l=this.locales.get_current();"unused"==l.used_status&&this.create_input(l.code),$("#video-rename-form").submit(this.submit_form),this.initForm=!0}this.update()},submit_form:function(t){t.preventDefault()},update:function(t){var e=0;for(var i in this.inputs)if(this.inputs[i].update(),t){var n=this.inputs[i].get_lang_btn_width();n>e&&(e=n)}if(t){e>100&&(e=100);for(var i in this.inputs)this.inputs[i].set_lang_btn_width(e)}this.new_inp_btn.update(),this.locales.update()},create_input:function(t,e,i,n){this.inputs_id_count++;var s=new l(this.inputs_id_count,t,this,"string"==typeof e&&e,"undefined"!=typeof i&&i,"undefined"!=typeof n&&n);this.inputs.push(s),this.insert_input(s)},insert_input:function(t){this.close_lang_popups(),$(t.render()).insertBefore($("#video-rename-new-lang")),this.update(!0)},focus_input:function(t){this.get_input_by_lang(t).set_focus(),this.close_lang_popups()},get_input_by_lang:function(t){for(var e in this.inputs)if(this.inputs[e].lang==t)return this.inputs[e]},close_lang_popups:function(){this.new_inp_btn.close_lang_popup();for(var t in this.inputs)this.inputs[t].close_tooltip()},save_input:function(t,e,i,s){var o=this,a={locale:t,title:e};null!==i&&null!==s&&(a.idreq=i,a.token=s),$.post({dataType:"json",url:"/video-user-suggest/"+this.video.id+"/submit",data:a,success:function(i,s,a){if(i.result===!0){var r=o.get_local_saved_inputs(),l=!1;for(var h in r)r[h].lang===t&&(r[h].title=e,r[h].timestamp=$.now(),l=!0);l===!1&&r.push({title:e,lang:t,id_req:i.idreq,token:i.token,timestamp:$.now()}),n.set("inputs",r,o.get_local_storage_namespace()),o.get_input_by_lang(t).saved(i.idreq,i.token)}else o.get_input_by_lang(t).updated_title("save_failed"),o.get_input_by_lang(t).open_tooltip(i.message)},error:function(e,i,n){o.get_input_by_lang(t).updated_title("save_failed"),o.get_input_by_lang(t).open_tooltip(e.responseText)}})},get_local_saved_inputs:function(){var t=n.get("inputs",this.get_local_storage_namespace());return t&&"object"==typeof t?(t.sort(function(t,e){return t.timestamp===e.timestamp?0:t.timestamp<e.timestamp?1:-1}),t):[]},get_local_storage_namespace:function(){return"RenameForm-v"+this.video.id}},new p}),define("skins/common/video/report",["config/main","mustache","lib/helpers/inline_loader","lib/helpers/overlay/box","lib/i18n!front"],function(t,e,i,n,s){var o=function(o){this.messages=s.__("report_form.*");var a=[{value:"nevermind",label:this.messages.nevermind,checked:!0},{value:"spam",label:this.messages.spam,checked:!1},{value:"notporn",label:this.messages.not_porn,checked:!1},{value:"underage",label:this.messages.underage,checked:!1},{value:"other",label:this.messages.other,checked:!1}];this.node=$(e.render(o,{reasons:a,labels:this.messages}));var r,l=this,h=this.node.children("form"),c=function(t){if(t.validation_error)n.get(l.getNode(),!0).setContent('<strong class="text-danger">'+t.message+"</strong>").show();else{var e=t.result?"text-success":"text-danger";l.getNode().replaceWith('<p class="text-center"><strong class="'+e+'">'+t.message+"</strong></p>")}},d=function(){r||(r=n.get(l.getNode(),!1,"hide").setContent(i.get("after",l.messages.sending).getHtml())),r.show();var e=h.serializeArray();for(var s in e)if("reason"===e[s].name){if("nevermind"===e[s].value)return void c({result:!0,message:l.messages.thanks});break}$.post("/video-report/"+t.data.id_video+"/0",e,c,"json").fail(function(){n.get(l.getNode(),!0).setContent('<strong class="text-danger">'+l.messages.sending_failed+"</strong>").show()}).always(function(){r.hide()})};this.node.find("button").on("click",d)};return o.prototype={getNode:function(){return this.node}},o}),define("skins/xnxx/video",["config/main","skins/xnxx/header/all_pages"],function(t){null!==t.data.id_video&&require(["mustache","lib/tab","skins/xnxx/video/comments","skins/xnxx/video/download","skins/common/video/playlist","text!skins/xnxx/video/sponsor_link.html","text!skins/xnxx/video/report.html","lib/i18n!front","skins/common/video/lastviews","skins/common/video/related","skins/common/video/vote","lib/helpers/thumbs_rotator","skins/xnxx/video/user_suggest/title"],function(e,i,n,s,o,a,r,l,h){if(t.data.sponsors&&t.data.sponsors.length>0&&!t.data.hide_sponsors){var c=Math.random()*t.data.sponsors.length,d=t.data.sponsors[Math.floor(c)];$(e.render(a,{more_at:l.__("video.sponsors.more_at"),sponsor:d})).prependTo($("#video-content-metadata wrapper")),$("#show-channel-desc").on("click",function(t){t.preventDefault(),$(this).parent().addClass("expanded")})}"function"==typeof o&&o().appendTo($('<div class="wrapper"></div>').prependTo("#content"));var p={};p.tabComments=n,p.tabDownload=s;var u=!1;p.tabReport=function(){require(["skins/common/video/report"],function(t){u||(u=!0,$("#tabReport").append(new t(r).getNode()))})},new i("#video-content-metadata",p,!0),h.declareVideoView(t.data.id_video)})});